"use strict";(globalThis.webpackChunkphysical_ai_textbook=globalThis.webpackChunkphysical_ai_textbook||[]).push([[436],{8188(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"chapters/chapter-04-building-with-ros2","title":"Chapter 4: Building with ROS 2","description":"Learning Objectives","source":"@site/docs/chapters/chapter-04-building-with-ros2.md","sourceDirName":"chapters","slug":"/chapters/chapter-04-building-with-ros2","permalink":"/Physical-AI-Humanoid-Robotics/chapters/chapter-04-building-with-ros2","draft":false,"unlisted":false,"editUrl":"https://github.com/muskaanfayyaz/Physical-AI-Humanoid-Robotics/tree/main/docs/chapters/chapter-04-building-with-ros2.md","tags":[],"version":"current","frontMatter":{},"sidebar":"weeklySidebar","previous":{"title":"Chapter 3: Introduction to ROS 2","permalink":"/Physical-AI-Humanoid-Robotics/chapters/chapter-03-introduction-to-ros2"},"next":{"title":"Chapter 5: ROS 2 for Humanoid Robots","permalink":"/Physical-AI-Humanoid-Robotics/chapters/chapter-05-ros2-for-humanoid-robots"}}');var r=s(4848),a=s(8453);const c={},t="Chapter 4: Building with ROS 2",l={},o=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction",id:"introduction",level:2},{value:"ROS 2 Package Structure and Organization",id:"ros-2-package-structure-and-organization",level:2},{value:"What is a Package?",id:"what-is-a-package",level:3},{value:"Package Organization Principles",id:"package-organization-principles",level:3},{value:"Standard Package Structure",id:"standard-package-structure",level:3},{value:"Package Metadata (package.xml)",id:"package-metadata-packagexml",level:3},{value:"Workspace Organization",id:"workspace-organization",level:3},{value:"Package Naming Conventions",id:"package-naming-conventions",level:3},{value:"Publishers and Subscribers: How They Work",id:"publishers-and-subscribers-how-they-work",level:2},{value:"The Publish-Subscribe Pattern",id:"the-publish-subscribe-pattern",level:3},{value:"Publisher Lifecycle",id:"publisher-lifecycle",level:3},{value:"Subscriber Lifecycle",id:"subscriber-lifecycle",level:3},{value:"Message Serialization and Deserialization",id:"message-serialization-and-deserialization",level:3},{value:"Zero-Copy Communication",id:"zero-copy-communication",level:3},{value:"Topic Namespaces and Remapping",id:"topic-namespaces-and-remapping",level:3},{value:"Services vs Topics vs Actions: When to Use Each",id:"services-vs-topics-vs-actions-when-to-use-each",level:2},{value:"Decision Framework",id:"decision-framework",level:3},{value:"Topic Use Cases",id:"topic-use-cases",level:3},{value:"Service Use Cases",id:"service-use-cases",level:3},{value:"Action Use Cases",id:"action-use-cases",level:3},{value:"Comparison Table",id:"comparison-table",level:3},{value:"Hybrid Patterns",id:"hybrid-patterns",level:3},{value:"Launch System Architecture",id:"launch-system-architecture",level:2},{value:"Why Launch Systems?",id:"why-launch-systems",level:3},{value:"Launch File Anatomy",id:"launch-file-anatomy",level:3},{value:"Launch File Types",id:"launch-file-types",level:3},{value:"Python Launch File Structure",id:"python-launch-file-structure",level:3},{value:"Launch File Composition",id:"launch-file-composition",level:3},{value:"Conditional Launching",id:"conditional-launching",level:3},{value:"Launch File Best Practices",id:"launch-file-best-practices",level:3},{value:"Parameter Management",id:"parameter-management",level:2},{value:"What are Parameters?",id:"what-are-parameters",level:3},{value:"Parameter Types",id:"parameter-types",level:3},{value:"Parameter Declaration",id:"parameter-declaration",level:3},{value:"Parameter Sources",id:"parameter-sources",level:3},{value:"Parameter YAML Files",id:"parameter-yaml-files",level:3},{value:"Dynamic Reconfiguration",id:"dynamic-reconfiguration",level:3},{value:"Parameter Best Practices",id:"parameter-best-practices",level:3},{value:"Build System: Colcon Concepts",id:"build-system-colcon-concepts",level:2},{value:"What is Colcon?",id:"what-is-colcon",level:3},{value:"Build Process Overview",id:"build-process-overview",level:3},{value:"Dependency Management",id:"dependency-management",level:3},{value:"Incremental Builds",id:"incremental-builds",level:3},{value:"Build Profiles and Options",id:"build-profiles-and-options",level:3},{value:"Workspace Overlay",id:"workspace-overlay",level:3},{value:"Multi-Node System Design",id:"multi-node-system-design",level:2},{value:"Design Principles",id:"design-principles",level:3},{value:"Decomposition Strategies",id:"decomposition-strategies",level:3},{value:"Communication Architecture",id:"communication-architecture",level:3},{value:"Namespace Organization",id:"namespace-organization",level:3},{value:"Lifecycle Management",id:"lifecycle-management",level:3},{value:"System-Level Design Example",id:"system-level-design-example",level:3},{value:"Conceptual Diagrams",id:"conceptual-diagrams",level:2},{value:"Diagram 1: Package Structure",id:"diagram-1-package-structure",level:3},{value:"Diagram 2: Publisher-Subscriber Flow",id:"diagram-2-publisher-subscriber-flow",level:3},{value:"Diagram 3: Communication Pattern Selection",id:"diagram-3-communication-pattern-selection",level:3},{value:"Diagram 4: Launch System Hierarchy",id:"diagram-4-launch-system-hierarchy",level:3},{value:"Diagram 5: Multi-Node System Architecture",id:"diagram-5-multi-node-system-architecture",level:3},{value:"Key Concepts Summary",id:"key-concepts-summary",level:2},{value:"Package",id:"package",level:3},{value:"Publisher",id:"publisher",level:3},{value:"Subscriber",id:"subscriber",level:3},{value:"Launch File",id:"launch-file",level:3},{value:"Parameter",id:"parameter",level:3},{value:"Colcon",id:"colcon",level:3},{value:"Namespace",id:"namespace",level:3},{value:"Workspace",id:"workspace",level:3},{value:"Knowledge Checkpoint",id:"knowledge-checkpoint",level:2},{value:"Chapter Summary",id:"chapter-summary",level:2},{value:"Further Reading",id:"further-reading",level:2},{value:"Looking Ahead",id:"looking-ahead",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"chapter-4-building-with-ros-2",children:"Chapter 4: Building with ROS 2"})}),"\n",(0,r.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Understand ROS 2 package structure and organization principles"}),"\n",(0,r.jsx)(n.li,{children:"Explain how publishers and subscribers work conceptually"}),"\n",(0,r.jsx)(n.li,{children:"Analyze when to use topics, services, and actions for different scenarios"}),"\n",(0,r.jsx)(n.li,{children:"Describe the launch system architecture and its role in system orchestration"}),"\n",(0,r.jsx)(n.li,{children:"Configure and manage parameters for flexible system configuration"}),"\n",(0,r.jsx)(n.li,{children:"Understand the build system (colcon) and dependency management"}),"\n",(0,r.jsx)(n.li,{children:"Design multi-node systems with appropriate communication patterns"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(n.p,{children:"Understanding ROS 2's architecture is essential, but building real systems requires mastering its development tools and patterns. How do you structure code into packages? How do publishers and subscribers actually communicate under the hood? When should you use a topic versus a service versus an action? How do you start ten nodes with the right parameters in the right order?"}),"\n",(0,r.jsx)(n.p,{children:"This chapter answers these questions by exploring the practical aspects of building with ROS 2. We examine package organization, communication pattern implementations, launch systems, parameter management, and build processes. By understanding these tools and patterns, you will be able to design and implement complex multi-node systems for humanoid robotics."}),"\n",(0,r.jsx)(n.h2,{id:"ros-2-package-structure-and-organization",children:"ROS 2 Package Structure and Organization"}),"\n",(0,r.jsx)(n.h3,{id:"what-is-a-package",children:"What is a Package?"}),"\n",(0,r.jsx)(n.p,{children:"A package is the fundamental unit of organization in ROS 2. It contains:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Nodes:"})," Executable programs that perform computations."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Launch Files:"})," Scripts that start multiple nodes with configuration."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Configuration Files:"})," Parameters, URDFs, calibration data."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Message Definitions:"})," Custom data structures for communication."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Dependencies:"})," Declaration of required libraries and other packages."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Build Instructions:"})," How to compile the package."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Documentation:"})," READMEs, API documentation."]}),"\n",(0,r.jsx)(n.p,{children:"Packages encapsulate related functionality. A camera driver package contains the driver node, camera message definitions, calibration tools, and documentation\u2014everything needed to use that camera."}),"\n",(0,r.jsx)(n.h3,{id:"package-organization-principles",children:"Package Organization Principles"}),"\n",(0,r.jsx)(n.p,{children:"Well-designed packages follow these principles:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Single Responsibility:"}),' Each package has one clear purpose. A "camera driver" package drives cameras, not processing images.']}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Minimal Dependencies:"})," Packages depend only on what they need. Excessive dependencies create fragile systems."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Reusability:"})," Packages should work in different contexts. A LiDAR driver shouldn't assume a specific robot configuration."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Discoverability:"})," Clear naming and documentation help others find and use packages."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Consistency:"})," Follow ROS 2 naming conventions and directory structure."]}),"\n",(0,r.jsx)(n.h3,{id:"standard-package-structure",children:"Standard Package Structure"}),"\n",(0,r.jsx)(n.p,{children:"A typical ROS 2 package follows this directory layout:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"my_robot_package/\n\u251c\u2500\u2500 CMakeLists.txt          (C++ build instructions)\n\u251c\u2500\u2500 package.xml             (package metadata and dependencies)\n\u251c\u2500\u2500 setup.py                (Python setup, if applicable)\n\u251c\u2500\u2500 setup.cfg               (Python configuration)\n\u2502\n\u251c\u2500\u2500 src/                    (C++ source files)\n\u2502   \u251c\u2500\u2500 my_node.cpp\n\u2502   \u2514\u2500\u2500 utils.cpp\n\u2502\n\u251c\u2500\u2500 include/                (C++ header files)\n\u2502   \u2514\u2500\u2500 my_robot_package/\n\u2502       \u2514\u2500\u2500 my_node.hpp\n\u2502\n\u251c\u2500\u2500 my_robot_package/       (Python package directory)\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 my_node.py\n\u2502\n\u251c\u2500\u2500 launch/                 (launch files)\n\u2502   \u251c\u2500\u2500 my_robot.launch.py\n\u2502   \u2514\u2500\u2500 simulation.launch.xml\n\u2502\n\u251c\u2500\u2500 config/                 (configuration files)\n\u2502   \u251c\u2500\u2500 params.yaml\n\u2502   \u2514\u2500\u2500 calibration.yaml\n\u2502\n\u251c\u2500\u2500 urdf/                   (robot descriptions)\n\u2502   \u2514\u2500\u2500 my_robot.urdf\n\u2502\n\u251c\u2500\u2500 msg/                    (custom message definitions)\n\u2502   \u2514\u2500\u2500 MyMessage.msg\n\u2502\n\u251c\u2500\u2500 srv/                    (custom service definitions)\n\u2502   \u2514\u2500\u2500 MyService.srv\n\u2502\n\u251c\u2500\u2500 action/                 (custom action definitions)\n\u2502   \u2514\u2500\u2500 MyAction.action\n\u2502\n\u251c\u2500\u2500 test/                   (unit tests)\n\u2502   \u2514\u2500\u2500 test_my_node.py\n\u2502\n\u2514\u2500\u2500 README.md              (package documentation)\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This structure separates concerns: source code in ",(0,r.jsx)(n.code,{children:"src/"}),", configuration in ",(0,r.jsx)(n.code,{children:"config/"}),", launch files in ",(0,r.jsx)(n.code,{children:"launch/"}),". Tools like build systems and package managers understand this structure."]}),"\n",(0,r.jsx)(n.h3,{id:"package-metadata-packagexml",children:"Package Metadata (package.xml)"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"package.xml"})," file describes the package:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<package format="3">\n  <name>my_robot_package</name>\n  <version>1.0.0</version>\n  <description>Description of package functionality</description>\n  <maintainer email="you@example.com">Your Name</maintainer>\n  <license>Apache-2.0</license>\n\n  \x3c!-- Build tool --\x3e\n  <buildtool_depend>ament_cmake</buildtool_depend>\n\n  \x3c!-- Dependencies needed to build --\x3e\n  <build_depend>rclcpp</build_depend>\n  <build_depend>sensor_msgs</build_depend>\n\n  \x3c!-- Dependencies needed to run --\x3e\n  <exec_depend>rclcpp</exec_depend>\n  <exec_depend>sensor_msgs</exec_depend>\n\n  \x3c!-- Test dependencies --\x3e\n  <test_depend>ament_lint_auto</test_depend>\n\n  <export>\n    <build_type>ament_cmake</build_type>\n  </export>\n</package>\n'})}),"\n",(0,r.jsxs)(n.p,{children:["This declares that the package depends on ",(0,r.jsx)(n.code,{children:"rclcpp"})," (ROS 2 C++ client library) and ",(0,r.jsx)(n.code,{children:"sensor_msgs"})," (standard sensor message types). Build tools use this to ensure dependencies are available."]}),"\n",(0,r.jsx)(n.h3,{id:"workspace-organization",children:"Workspace Organization"}),"\n",(0,r.jsx)(n.p,{children:"Packages exist within workspaces\u2014directories containing multiple packages:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"ros2_workspace/\n\u251c\u2500\u2500 src/                    (source space - your packages)\n\u2502   \u251c\u2500\u2500 package_a/\n\u2502   \u251c\u2500\u2500 package_b/\n\u2502   \u2514\u2500\u2500 package_c/\n\u2502\n\u251c\u2500\u2500 build/                  (build artifacts)\n\u251c\u2500\u2500 install/                (installed packages)\n\u2514\u2500\u2500 log/                    (build logs)\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You edit code in ",(0,r.jsx)(n.code,{children:"src/"}),", build into ",(0,r.jsx)(n.code,{children:"build/"})," and ",(0,r.jsx)(n.code,{children:"install/"}),", then source ",(0,r.jsx)(n.code,{children:"install/setup.bash"})," to use the packages."]}),"\n",(0,r.jsx)(n.h3,{id:"package-naming-conventions",children:"Package Naming Conventions"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 follows naming conventions for clarity:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Packages:"})," lowercase with underscores: ",(0,r.jsx)(n.code,{children:"my_robot_bringup"}),", ",(0,r.jsx)(n.code,{children:"camera_driver"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Nodes:"})," lowercase with underscores: ",(0,r.jsx)(n.code,{children:"robot_state_publisher"}),", ",(0,r.jsx)(n.code,{children:"joint_controller"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Topics:"})," lowercase with slashes for namespaces: ",(0,r.jsx)(n.code,{children:"/camera/image_raw"}),", ",(0,r.jsx)(n.code,{children:"/joint_states"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Messages/Services/Actions:"})," CamelCase: ",(0,r.jsx)(n.code,{children:"SetBool"}),", ",(0,r.jsx)(n.code,{children:"NavigateToPose"}),", ",(0,r.jsx)(n.code,{children:"JointState"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Parameters:"})," lowercase with underscores or dots: ",(0,r.jsx)(n.code,{children:"max_velocity"}),", ",(0,r.jsx)(n.code,{children:"camera.frame_rate"})]}),"\n",(0,r.jsx)(n.p,{children:"Consistent naming prevents confusion and improves readability."}),"\n",(0,r.jsx)(n.h2,{id:"publishers-and-subscribers-how-they-work",children:"Publishers and Subscribers: How They Work"}),"\n",(0,r.jsx)(n.h3,{id:"the-publish-subscribe-pattern",children:"The Publish-Subscribe Pattern"}),"\n",(0,r.jsx)(n.p,{children:"Publishers and subscribers implement asynchronous, many-to-many communication:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Decoupling:"})," Publishers don't know about subscribers. Subscribers don't know about publishers. This separation allows changing either side independently."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Flexibility:"})," Adding a new subscriber doesn't require modifying publishers. Multiple subscribers receive the same data."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Scalability:"})," Can handle hundreds of concurrent data streams."]}),"\n",(0,r.jsx)(n.h3,{id:"publisher-lifecycle",children:"Publisher Lifecycle"}),"\n",(0,r.jsx)(n.p,{children:"When you create a publisher, several things happen:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Topic Registration:"})," The publisher announces it will publish on a specific topic with a specific message type."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Discovery:"})," Through DDS, the publisher advertises itself to all nodes in the system."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Buffer Allocation:"})," Memory is allocated for outgoing messages based on QoS history settings."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Connection Establishment:"})," When subscribers appear, DDS establishes communication paths."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Publishing:"})," When you call ",(0,r.jsx)(n.code,{children:"publish()"}),", the message is serialized and sent via DDS to all subscribers."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Conceptual Flow:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"[Node creates Publisher]\n       \u2193\n[Register topic + type with DDS]\n       \u2193\n[DDS advertises to network]\n       \u2193\n[Subscriber discovers publisher] \u2190 (DDS discovery)\n       \u2193\n[DDS establishes connection]\n       \u2193\n[publish() called]\n       \u2193\n[Message serialized]\n       \u2193\n[DDS distributes to all subscribers]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"subscriber-lifecycle",children:"Subscriber Lifecycle"}),"\n",(0,r.jsx)(n.p,{children:"Subscribers mirror publishers:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Topic Registration:"})," The subscriber announces interest in a specific topic and message type."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Discovery:"})," DDS discovers compatible publishers."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Buffer Allocation:"})," Memory for incoming messages based on QoS."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Connection Establishment:"})," DDS connects to publishers."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Callback Registration:"})," The subscriber registers a callback function to invoke when messages arrive."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Message Reception:"})," When messages arrive, DDS deserializes them and invokes the callback with the message data."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Conceptual Flow:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"[Node creates Subscriber]\n       \u2193\n[Register topic + type + callback]\n       \u2193\n[DDS advertises subscription]\n       \u2193\n[DDS discovers publishers]\n       \u2193\n[DDS establishes connections]\n       \u2193\n[Message arrives from publisher]\n       \u2193\n[DDS deserializes message]\n       \u2193\n[Callback invoked with message]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"message-serialization-and-deserialization",children:"Message Serialization and Deserialization"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 messages are language-agnostic data structures. To send over network:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Serialization (Publisher):"})," Convert message from in-memory structure to byte stream. DDS handles this using Common Data Representation (CDR) format."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Transmission:"})," Byte stream sent via network (UDP, shared memory, etc.)."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Deserialization (Subscriber):"})," Convert byte stream back to in-memory structure."]}),"\n",(0,r.jsx)(n.p,{children:"This serialization is transparent\u2014you work with native data structures in your programming language."}),"\n",(0,r.jsx)(n.h3,{id:"zero-copy-communication",children:"Zero-Copy Communication"}),"\n",(0,r.jsx)(n.p,{children:"For efficiency, ROS 2 supports zero-copy transport when publisher and subscriber are on the same machine:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Shared Memory:"})," Instead of copying message data, both publisher and subscriber access the same memory region."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Pointer Passing:"})," Only pointers are passed, not data."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Performance:"})," Eliminates copy overhead for large messages (images, point clouds)."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Limitations:"})," Works only on same machine, requires compatible QoS settings."]}),"\n",(0,r.jsx)(n.p,{children:"This is particularly important for humanoid robots processing high-resolution images and point clouds."}),"\n",(0,r.jsx)(n.h3,{id:"topic-namespaces-and-remapping",children:"Topic Namespaces and Remapping"}),"\n",(0,r.jsx)(n.p,{children:"Topics can be namespaced to organize communication:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Global Topics:"})," Begin with ",(0,r.jsx)(n.code,{children:"/"}),": ",(0,r.jsx)(n.code,{children:"/camera/image"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Relative Topics:"})," Don't begin with ",(0,r.jsx)(n.code,{children:"/"}),": ",(0,r.jsx)(n.code,{children:"image"})," (resolved relative to node namespace)"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Private Topics:"})," Begin with ",(0,r.jsx)(n.code,{children:"~"}),": ",(0,r.jsx)(n.code,{children:"~/debug"})," (private to node)"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Remapping:"})," Topics can be remapped at runtime:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"ros2 run my_package my_node --ros-args -r chatter:=/my_topic\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This remaps topic ",(0,r.jsx)(n.code,{children:"chatter"})," to ",(0,r.jsx)(n.code,{children:"/my_topic"}),", allowing reusing nodes in different contexts without code changes."]}),"\n",(0,r.jsx)(n.h2,{id:"services-vs-topics-vs-actions-when-to-use-each",children:"Services vs Topics vs Actions: When to Use Each"}),"\n",(0,r.jsx)(n.h3,{id:"decision-framework",children:"Decision Framework"}),"\n",(0,r.jsx)(n.p,{children:"Choosing the right communication pattern is critical for system design:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Topics:"})," Continuous data streams, latest value matters, one-way communication."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Services:"})," Request-response, confirmation needed, infrequent transactions."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Actions:"})," Long-running tasks, progress updates needed, cancellation required."]}),"\n",(0,r.jsx)(n.h3,{id:"topic-use-cases",children:"Topic Use Cases"}),"\n",(0,r.jsx)(n.p,{children:"Use topics when:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Sensor Data Streaming:"})," Camera images, LiDAR scans, IMU readings. Data flows continuously, subscribers want latest values."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"State Publishing:"})," Joint positions, robot pose, odometry. Multiple nodes need current state."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Command Streams:"})," Velocity commands to motors. Commands stream continuously at control rate."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Event Notifications:"})," Collision detected, button pressed. Events broadcast to interested parties."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/camera/image_raw"}),": Camera driver publishes, detector/visualizer subscribe"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/joint_states"}),": Joint controllers publish, state estimator/visualizer subscribe"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/cmd_vel"}),": Planner publishes, motor controller subscribes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/diagnostics"}),": All nodes publish health, monitor subscribes"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"service-use-cases",children:"Service Use Cases"}),"\n",(0,r.jsx)(n.p,{children:"Use services when:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Configuration Changes:"})," Setting parameters, triggering calibration. Need confirmation of change."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Computation Requests:"})," Path planning, inverse kinematics. Send input, get computed result."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"State Queries:"})," Get map, retrieve configuration. Query current state."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Control Commands:"})," Start/stop processes, reset state. Need acknowledgment."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/set_parameters"}),": Change node configuration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/compute_ik"}),": Request inverse kinematics solution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/get_planning_scene"}),": Retrieve current environment model"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/trigger_calibration"}),": Start calibration routine"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"action-use-cases",children:"Action Use Cases"}),"\n",(0,r.jsx)(n.p,{children:"Use actions when:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Navigation:"})," Moving to goal takes seconds. Want progress updates, ability to cancel."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Manipulation:"})," Grasping object takes time. Need feedback on approach progress."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Long Computations:"})," Planning complex path takes seconds. Want to cancel if taking too long."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Sequences:"})," Executing multi-step behaviors. Want per-step feedback."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/navigate_to_pose"}),": Navigate to target with progress updates"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/follow_joint_trajectory"}),": Execute trajectory with feedback"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/grasp_object"}),": Approach, grasp, lift with feedback"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/dock"}),": Autonomous docking with progress updates"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"comparison-table",children:"Comparison Table"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Aspect"}),(0,r.jsx)(n.th,{children:"Topic"}),(0,r.jsx)(n.th,{children:"Service"}),(0,r.jsx)(n.th,{children:"Action"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Pattern"}),(0,r.jsx)(n.td,{children:"Pub-Sub"}),(0,r.jsx)(n.td,{children:"Request-Response"}),(0,r.jsx)(n.td,{children:"Goal-Feedback-Result"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Timing"}),(0,r.jsx)(n.td,{children:"Asynchronous"}),(0,r.jsx)(n.td,{children:"Synchronous"}),(0,r.jsx)(n.td,{children:"Asynchronous"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Duration"}),(0,r.jsx)(n.td,{children:"Continuous"}),(0,r.jsx)(n.td,{children:"Instant"}),(0,r.jsx)(n.td,{children:"Long-running"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Feedback"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Cancellation"}),(0,r.jsx)(n.td,{children:"N/A"}),(0,r.jsx)(n.td,{children:"N/A"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Confirmation"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Multiple Consumers"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Use Case"}),(0,r.jsx)(n.td,{children:"Streaming data"}),(0,r.jsx)(n.td,{children:"Quick transactions"}),(0,r.jsx)(n.td,{children:"Tasks with progress"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"hybrid-patterns",children:"Hybrid Patterns"}),"\n",(0,r.jsx)(n.p,{children:"Real systems often combine patterns:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Command + Status:"})," Publish commands on topic, subscribe to status topic for feedback. Simpler than actions for continuous control."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Service + Topic:"})," Call service to start process, subscribe to topic for results. Avoids blocking on long computations."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Action + Topic:"})," Use action for high-level goal, publish intermediate results on topics for other nodes."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example Humanoid Navigation:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Action ",(0,r.jsx)(n.code,{children:"/navigate_to_pose"}),": High-level navigation goal"]}),"\n",(0,r.jsxs)(n.li,{children:["Topic ",(0,r.jsx)(n.code,{children:"/cmd_vel"}),": Low-level velocity commands to motors"]}),"\n",(0,r.jsxs)(n.li,{children:["Topic ",(0,r.jsx)(n.code,{children:"/odometry"}),": Position feedback"]}),"\n",(0,r.jsxs)(n.li,{children:["Service ",(0,r.jsx)(n.code,{children:"/get_map"}),": Retrieve map for planning"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"launch-system-architecture",children:"Launch System Architecture"}),"\n",(0,r.jsx)(n.h3,{id:"why-launch-systems",children:"Why Launch Systems?"}),"\n",(0,r.jsx)(n.p,{children:"Starting a humanoid robot manually is impractical:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Terminal 1: ros2 run camera_driver camera_node\nTerminal 2: ros2 run depth_processing depth_node\nTerminal 3: ros2 run object_detection detector_node --ros-args -p threshold:=0.8\nTerminal 4: ros2 run localization slam_node\nTerminal 5: ros2 run planning planner_node\nTerminal 6: ros2 run control controller_node\n... (20+ more nodes)\n"})}),"\n",(0,r.jsx)(n.p,{children:"Launch systems automate this, starting all nodes with correct parameters, namespaces, and remappings in a single command."}),"\n",(0,r.jsx)(n.h3,{id:"launch-file-anatomy",children:"Launch File Anatomy"}),"\n",(0,r.jsx)(n.p,{children:"Launch files describe how to start a system. They can:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Start nodes with arguments"}),"\n",(0,r.jsx)(n.li,{children:"Set parameters from YAML files"}),"\n",(0,r.jsx)(n.li,{children:"Remap topics/services"}),"\n",(0,r.jsx)(n.li,{children:"Set namespaces"}),"\n",(0,r.jsx)(n.li,{children:"Include other launch files"}),"\n",(0,r.jsx)(n.li,{children:"Execute actions conditionally"}),"\n",(0,r.jsx)(n.li,{children:"Set environment variables"}),"\n",(0,r.jsx)(n.li,{children:"Start processes in order"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"launch-file-types",children:"Launch File Types"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 supports multiple launch file formats:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Python Launch Files (.launch.py):"})," Most flexible. Full Python scripting available."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"XML Launch Files (.launch.xml):"})," Declarative, easier for simple cases."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"YAML Launch Files (.launch.yaml):"})," Simplest, limited functionality."]}),"\n",(0,r.jsx)(n.p,{children:"Python launch files are most common for complex systems."}),"\n",(0,r.jsx)(n.h3,{id:"python-launch-file-structure",children:"Python Launch File Structure"}),"\n",(0,r.jsx)(n.p,{children:"A basic Python launch file:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    return LaunchDescription([\n        Node(\n            package='camera_driver',\n            executable='camera_node',\n            name='camera',\n            parameters=[{\n                'frame_rate': 30,\n                'resolution': '1920x1080'\n            }]\n        ),\n        Node(\n            package='object_detection',\n            executable='detector_node',\n            name='detector',\n            parameters=[{'confidence_threshold': 0.8}],\n            remappings=[\n                ('/image', '/camera/image_raw')\n            ]\n        )\n    ])\n"})}),"\n",(0,r.jsx)(n.p,{children:"This starts a camera node and detector node with specified parameters and topic remapping."}),"\n",(0,r.jsx)(n.h3,{id:"launch-file-composition",children:"Launch File Composition"}),"\n",(0,r.jsx)(n.p,{children:"Complex systems use composition\u2014including other launch files:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch.actions import IncludeLaunchDescription\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\n\ndef generate_launch_description():\n    return LaunchDescription([\n        IncludeLaunchDescription(\n            PythonLaunchDescriptionSource('sensors.launch.py')\n        ),\n        IncludeLaunchDescription(\n            PythonLaunchDescriptionSource('perception.launch.py')\n        ),\n        IncludeLaunchDescription(\n            PythonLaunchDescriptionSource('planning.launch.py')\n        )\n    ])\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This modular approach separates concerns: ",(0,r.jsx)(n.code,{children:"sensors.launch.py"})," starts sensors, ",(0,r.jsx)(n.code,{children:"perception.launch.py"})," starts perception nodes, etc. You can test each layer independently."]}),"\n",(0,r.jsx)(n.h3,{id:"conditional-launching",children:"Conditional Launching"}),"\n",(0,r.jsx)(n.p,{children:"Launch files support conditional logic:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from launch.conditions import IfCondition\nfrom launch.substitutions import LaunchConfiguration\n\ndef generate_launch_description():\n    use_sim = LaunchConfiguration('use_sim', default='false')\n\n    return LaunchDescription([\n        DeclareLaunchArgument('use_sim'),\n\n        Node(\n            package='gazebo_ros',\n            executable='spawn_entity',\n            condition=IfCondition(use_sim),\n            # Only launch in simulation\n        ),\n        Node(\n            package='hardware_interface',\n            executable='robot_hw_node',\n            condition=UnlessCondition(use_sim),\n            # Only launch on real hardware\n        )\n    ])\n"})}),"\n",(0,r.jsx)(n.p,{children:"This allows one launch file to work in simulation and on real hardware."}),"\n",(0,r.jsx)(n.h3,{id:"launch-file-best-practices",children:"Launch File Best Practices"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Parameterize:"})," Use launch arguments rather than hardcoding values."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Compose:"})," Break large launch files into smaller, reusable pieces."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Document:"})," Add comments explaining what each section does."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Test Incrementally:"})," Start with one node, verify, then add more."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use Namespaces:"})," Organize nodes into namespaces for clarity."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Handle Errors:"})," Consider what happens if nodes fail to start."]}),"\n",(0,r.jsx)(n.h2,{id:"parameter-management",children:"Parameter Management"}),"\n",(0,r.jsx)(n.h3,{id:"what-are-parameters",children:"What are Parameters?"}),"\n",(0,r.jsx)(n.p,{children:"Parameters configure node behavior without recompiling:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Runtime Configuration:"})," Change settings without code changes."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Environment Adaptation:"})," Different parameters for simulation vs. hardware."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Tuning:"})," Adjust control gains, thresholds, timeouts during development."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Multi-Instance:"})," Same node with different parameters for different sensors."]}),"\n",(0,r.jsx)(n.h3,{id:"parameter-types",children:"Parameter Types"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 supports several parameter types:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Boolean:"})," true/false flags\n",(0,r.jsx)(n.strong,{children:"Integer:"})," Whole numbers\n",(0,r.jsx)(n.strong,{children:"Double:"})," Floating-point numbers\n",(0,r.jsx)(n.strong,{children:"String:"})," Text values\n",(0,r.jsx)(n.strong,{children:"Arrays:"})," Lists of values (integer, double, string arrays)\n",(0,r.jsx)(n.strong,{children:"Byte Arrays:"})," Binary data"]}),"\n",(0,r.jsx)(n.h3,{id:"parameter-declaration",children:"Parameter Declaration"}),"\n",(0,r.jsx)(n.p,{children:"Nodes must declare parameters before using them:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Conceptual Process:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Node declares parameter with name, type, and optional default"}),"\n",(0,r.jsx)(n.li,{children:"ROS 2 checks if parameter was set externally (launch file, command line)"}),"\n",(0,r.jsx)(n.li,{children:"If set externally, use that value; otherwise use default"}),"\n",(0,r.jsx)(n.li,{children:"Node accesses parameter value during execution"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Static vs. Dynamic:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Static Parameters:"})," Cannot change after node starts. Set once at initialization."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Dynamic Parameters:"})," Can be modified while node runs. Node must handle changes."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"parameter-sources",children:"Parameter Sources"}),"\n",(0,r.jsx)(n.p,{children:"Parameters can come from multiple sources (in priority order):"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Command Line:"})," Highest priority"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"ros2 run pkg node --ros-args -p param:=value\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Launch Files:"})," Python, XML, or YAML launch files"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"parameters=[{'my_param': 42}]\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"YAML Files:"})," Loaded by launch file"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"node_name:\n  ros__parameters:\n    my_param: 42\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Default Values:"})," Declared in node code"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"declare_parameter('my_param', 42)\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This hierarchy allows setting defaults in code, common values in YAML, and overrides in launch files or command line."}),"\n",(0,r.jsx)(n.h3,{id:"parameter-yaml-files",children:"Parameter YAML Files"}),"\n",(0,r.jsx)(n.p,{children:"YAML files organize parameters hierarchically:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'/camera_node:\n  ros__parameters:\n    frame_rate: 30\n    resolution: "1920x1080"\n    auto_exposure: true\n    exposure_value: 100\n\n/detector_node:\n  ros__parameters:\n    confidence_threshold: 0.8\n    max_detections: 10\n    model_path: "/models/detector.onnx"\n'})}),"\n",(0,r.jsxs)(n.p,{children:["The namespace (",(0,r.jsx)(n.code,{children:"/camera_node"}),") matches the node name, ensuring parameters go to the correct node."]}),"\n",(0,r.jsx)(n.h3,{id:"dynamic-reconfiguration",children:"Dynamic Reconfiguration"}),"\n",(0,r.jsx)(n.p,{children:"Some parameters can change at runtime:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Parameter Callbacks:"})," Nodes register callbacks invoked when parameters change."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Validation:"})," Callbacks can reject invalid values."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"State Updates:"})," Node updates internal state based on new parameter values."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example Use Cases:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Adjusting camera exposure while running"}),"\n",(0,r.jsx)(n.li,{children:"Tuning PID control gains during testing"}),"\n",(0,r.jsx)(n.li,{children:"Changing detection thresholds based on lighting"}),"\n",(0,r.jsx)(n.li,{children:"Enabling/disabling debug output"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"parameter-best-practices",children:"Parameter Best Practices"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use Descriptive Names:"})," ",(0,r.jsx)(n.code,{children:"camera_frame_rate"})," better than ",(0,r.jsx)(n.code,{children:"cfr"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Provide Defaults:"})," Every parameter should have a sensible default."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Document Parameters:"})," Explain what each parameter does, units, valid ranges."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Validate Values:"})," Check for valid ranges, don't assume correctness."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Group Related Parameters:"})," Use consistent naming schemes for related parameters."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Version Parameters:"})," Include parameter file version for compatibility tracking."]}),"\n",(0,r.jsx)(n.h2,{id:"build-system-colcon-concepts",children:"Build System: Colcon Concepts"}),"\n",(0,r.jsx)(n.h3,{id:"what-is-colcon",children:"What is Colcon?"}),"\n",(0,r.jsx)(n.p,{children:"Colcon is ROS 2's build tool. It:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Discovers packages in workspace"}),"\n",(0,r.jsx)(n.li,{children:"Determines build order based on dependencies"}),"\n",(0,r.jsx)(n.li,{children:"Invokes appropriate build system for each package (CMake, Python setuptools)"}),"\n",(0,r.jsx)(n.li,{children:"Manages installation and environment setup"}),"\n",(0,r.jsx)(n.li,{children:"Supports parallel builds for speed"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"build-process-overview",children:"Build Process Overview"}),"\n",(0,r.jsxs)(n.p,{children:["When you run ",(0,r.jsx)(n.code,{children:"colcon build"}),", several steps occur:"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Discovery:"})," Colcon scans ",(0,r.jsx)(n.code,{children:"src/"})," directory for packages (identified by ",(0,r.jsx)(n.code,{children:"package.xml"}),")."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Dependency Resolution:"})," Reads ",(0,r.jsx)(n.code,{children:"package.xml"})," to determine package dependencies and build order."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Build Planning:"})," Determines which packages can build in parallel (no dependency between them)."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Build Execution:"})," For each package:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Generate build files (CMake, setuptools)"}),"\n",(0,r.jsx)(n.li,{children:"Compile source code"}),"\n",(0,r.jsx)(n.li,{children:"Link libraries and executables"}),"\n",(0,r.jsx)(n.li,{children:"Run build-time tests (optional)"}),"\n",(0,r.jsxs)(n.li,{children:["Install to ",(0,r.jsx)(n.code,{children:"install/"})," directory"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Environment Setup:"})," Generate setup scripts that configure environment to use built packages."]}),"\n",(0,r.jsx)(n.h3,{id:"dependency-management",children:"Dependency Management"}),"\n",(0,r.jsx)(n.p,{children:"Package dependencies ensure correct build order:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Build Dependencies:"})," Required to compile the package."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<build_depend>rclcpp</build_depend>\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Execution Dependencies:"})," Required to run the package."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<exec_depend>sensor_msgs</exec_depend>\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Build and Execution:"})," Required for both."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<depend>geometry_msgs</depend>\n"})}),"\n",(0,r.jsx)(n.p,{children:"Colcon ensures packages are built after their dependencies."}),"\n",(0,r.jsx)(n.h3,{id:"incremental-builds",children:"Incremental Builds"}),"\n",(0,r.jsx)(n.p,{children:"Colcon performs incremental builds\u2014only rebuilding changed packages:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Change Detection:"})," Tracks file modification times."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Selective Rebuild:"})," Only rebuilds packages with changes and packages depending on them."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Speed Improvement:"})," Avoids unnecessary recompilation."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Force Rebuild:"})," Can force rebuild of specific packages if needed."]}),"\n",(0,r.jsx)(n.h3,{id:"build-profiles-and-options",children:"Build Profiles and Options"}),"\n",(0,r.jsx)(n.p,{children:"Colcon supports build customization:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Debug vs. Release:"})," Different optimization levels"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"colcon build --cmake-args -DCMAKE_BUILD_TYPE=Release\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Parallel Jobs:"})," Control number of parallel builds"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"colcon build --parallel-workers 4\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Specific Packages:"})," Build only certain packages"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"colcon build --packages-select my_package\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symlink Install:"})," For Python, link instead of copy for faster iteration"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"colcon build --symlink-install\n"})}),"\n",(0,r.jsx)(n.h3,{id:"workspace-overlay",children:"Workspace Overlay"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 supports workspace overlaying\u2014building workspace that extends another:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Underlay:"})," Base workspace (often ROS 2 installation)"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Overlay:"})," Your workspace, adds/overrides packages"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Sourcing Order:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Source underlay: ",(0,r.jsx)(n.code,{children:"source /opt/ros/humble/setup.bash"})]}),"\n",(0,r.jsxs)(n.li,{children:["Build overlay: ",(0,r.jsx)(n.code,{children:"colcon build"})]}),"\n",(0,r.jsxs)(n.li,{children:["Source overlay: ",(0,r.jsx)(n.code,{children:"source install/setup.bash"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This allows working with stable base ROS 2 while developing custom packages in overlay."}),"\n",(0,r.jsx)(n.h2,{id:"multi-node-system-design",children:"Multi-Node System Design"}),"\n",(0,r.jsx)(n.h3,{id:"design-principles",children:"Design Principles"}),"\n",(0,r.jsx)(n.p,{children:"Effective multi-node systems follow key principles:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Modularity:"})," Each node has single, well-defined responsibility."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Loose Coupling:"})," Nodes interact through well-defined interfaces (topics, services, actions)."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Fault Isolation:"})," Node failures don't cascade to entire system."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Scalability:"})," Can add nodes without redesigning system."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Testability:"})," Individual nodes can be tested in isolation."]}),"\n",(0,r.jsx)(n.h3,{id:"decomposition-strategies",children:"Decomposition Strategies"}),"\n",(0,r.jsx)(n.p,{children:"How to divide functionality into nodes:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"By Hardware:"})," One node per sensor or actuator."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Advantages: Hardware abstraction, easy to swap hardware"}),"\n",(0,r.jsxs)(n.li,{children:["Example: ",(0,r.jsx)(n.code,{children:"camera_node"}),", ",(0,r.jsx)(n.code,{children:"lidar_node"}),", ",(0,r.jsx)(n.code,{children:"motor_controller_node"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"By Function:"})," One node per logical function."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Advantages: Clear responsibilities, reusable"}),"\n",(0,r.jsxs)(n.li,{children:["Example: ",(0,r.jsx)(n.code,{children:"object_detector"}),", ",(0,r.jsx)(n.code,{children:"path_planner"}),", ",(0,r.jsx)(n.code,{children:"localizer"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"By Frequency:"})," Nodes grouped by update rate."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Advantages: Efficient scheduling, real-time support"}),"\n",(0,r.jsxs)(n.li,{children:["Example: ",(0,r.jsx)(n.code,{children:"high_freq_controller"})," (1kHz), ",(0,r.jsx)(n.code,{children:"planner"})," (10Hz), ",(0,r.jsx)(n.code,{children:"ui"})," (1Hz)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Hybrid:"})," Combine strategies as appropriate."]}),"\n",(0,r.jsx)(n.h3,{id:"communication-architecture",children:"Communication Architecture"}),"\n",(0,r.jsx)(n.p,{children:"Design communication patterns carefully:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Data Flow:"})," Understand how data flows through system. Draw diagrams showing topic connections."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Latency Budget:"})," Know maximum acceptable latency for each path. Camera\u2192Detector\u2192Planner\u2192Controller."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Bandwidth Requirements:"})," High-resolution images require more bandwidth than pose estimates."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"QoS Selection:"})," Match QoS to requirements. Commands need reliability, sensor streams can use best-effort."]}),"\n",(0,r.jsx)(n.h3,{id:"namespace-organization",children:"Namespace Organization"}),"\n",(0,r.jsx)(n.p,{children:"Organize nodes into logical namespaces:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"/robot1/\n  /sensors/\n    /camera/\n      /front/\n        - image_raw\n        - camera_info\n      /rear/\n        - image_raw\n        - camera_info\n    /lidar/\n      - scan\n  /perception/\n    - detections\n    - obstacles\n  /planning/\n    - path\n  /control/\n    - cmd_vel\n    - joint_commands\n"})}),"\n",(0,r.jsx)(n.p,{children:"Namespaces prevent naming conflicts and clarify system structure."}),"\n",(0,r.jsx)(n.h3,{id:"lifecycle-management",children:"Lifecycle Management"}),"\n",(0,r.jsx)(n.p,{children:"Managing node startup and shutdown:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Startup Order:"})," Some nodes depend on others being ready (e.g., planners need localization)."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Health Monitoring:"})," Detect when nodes fail and restart or alert."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Graceful Shutdown:"})," Ensure nodes clean up resources properly."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"State Synchronization:"})," Ensure consistent system state during transitions."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Launch Files:"})," Encode startup order and dependencies."]}),"\n",(0,r.jsx)(n.h3,{id:"system-level-design-example",children:"System-Level Design Example"}),"\n",(0,r.jsx)(n.p,{children:"Humanoid robot navigation system:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Sensor Layer:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"camera_driver"}),": Publishes ",(0,r.jsx)(n.code,{children:"/camera/image_raw"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"imu_driver"}),": Publishes ",(0,r.jsx)(n.code,{children:"/imu/data"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"lidar_driver"}),": Publishes ",(0,r.jsx)(n.code,{children:"/scan"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Perception Layer:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"visual_odometry"}),": Subscribes ",(0,r.jsx)(n.code,{children:"/camera/image_raw"}),", ",(0,r.jsx)(n.code,{children:"/imu/data"}),"; publishes ",(0,r.jsx)(n.code,{children:"/vo/odom"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"scan_matcher"}),": Subscribes ",(0,r.jsx)(n.code,{children:"/scan"}),"; publishes ",(0,r.jsx)(n.code,{children:"/scan_odom"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"sensor_fusion"}),": Subscribes ",(0,r.jsx)(n.code,{children:"/vo/odom"}),", ",(0,r.jsx)(n.code,{children:"/scan_odom"}),"; publishes ",(0,r.jsx)(n.code,{children:"/odometry"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Planning Layer:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"global_planner"}),": Action server ",(0,r.jsx)(n.code,{children:"/navigate_to_pose"}),"; publishes ",(0,r.jsx)(n.code,{children:"/global_plan"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"local_planner"}),": Subscribes ",(0,r.jsx)(n.code,{children:"/global_plan"}),", ",(0,r.jsx)(n.code,{children:"/odometry"}),", ",(0,r.jsx)(n.code,{children:"/scan"}),"; publishes ",(0,r.jsx)(n.code,{children:"/cmd_vel"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Control Layer:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"motor_controller"}),": Subscribes ",(0,r.jsx)(n.code,{children:"/cmd_vel"}),"; publishes ",(0,r.jsx)(n.code,{children:"/joint_states"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Each layer builds on previous layer, data flowing sensors\u2192perception\u2192planning\u2192control."}),"\n",(0,r.jsx)(n.h2,{id:"conceptual-diagrams",children:"Conceptual Diagrams"}),"\n",(0,r.jsx)(n.h3,{id:"diagram-1-package-structure",children:"Diagram 1: Package Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"ROS 2 Package Anatomy:\n\nmy_robot_package/\n\u2502\n\u251c\u2500\u2500 Package Metadata\n\u2502   \u251c\u2500\u2500 package.xml (dependencies, version, license)\n\u2502   \u2514\u2500\u2500 CMakeLists.txt / setup.py (build instructions)\n\u2502\n\u251c\u2500\u2500 Source Code\n\u2502   \u251c\u2500\u2500 src/ (C++ implementations)\n\u2502   \u251c\u2500\u2500 include/ (C++ headers)\n\u2502   \u2514\u2500\u2500 my_robot_package/ (Python modules)\n\u2502\n\u251c\u2500\u2500 Interfaces\n\u2502   \u251c\u2500\u2500 msg/ (custom message types)\n\u2502   \u251c\u2500\u2500 srv/ (custom service types)\n\u2502   \u2514\u2500\u2500 action/ (custom action types)\n\u2502\n\u251c\u2500\u2500 Configuration\n\u2502   \u251c\u2500\u2500 launch/ (launch files)\n\u2502   \u251c\u2500\u2500 config/ (parameter YAML files)\n\u2502   \u2514\u2500\u2500 urdf/ (robot descriptions)\n\u2502\n\u2514\u2500\u2500 Testing\n    \u2514\u2500\u2500 test/ (unit and integration tests)\n\nPackage relationships:\n\n[Package A] \u2500\u2500depends on\u2500\u2500> [Package B]\n     \u2193                           \u2193\n [builds after]           [builds first]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"diagram-2-publisher-subscriber-flow",children:"Diagram 2: Publisher-Subscriber Flow"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Publisher-Subscriber Detailed Flow:\n\nPublisher Side:\n[Node Code]\n     \u2193\n[create_publisher(topic, type, qos)]\n     \u2193\n[DDS registers publisher]\n     \u2193\n[DDS advertises on network]\n     \u2193 (discovery protocol)\n[DDS finds compatible subscribers]\n     \u2193\n[DDS establishes connection]\n     \u2193\n[publish(message)]\n     \u2193\n[Serialize message to bytes]\n     \u2193\n[DDS transmits (UDP/shared memory)]\n\nSubscriber Side:\n[Node Code]\n     \u2193\n[create_subscription(topic, type, callback, qos)]\n     \u2193\n[DDS registers subscriber]\n     \u2193\n[DDS advertises on network]\n     \u2193 (discovery protocol)\n[DDS finds compatible publishers]\n     \u2193\n[DDS establishes connection]\n     \u2193\n[DDS receives bytes]\n     \u2193\n[Deserialize to message object]\n     \u2193\n[Invoke callback(message)]\n     \u2193\n[User callback executes]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"diagram-3-communication-pattern-selection",children:"Diagram 3: Communication Pattern Selection"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Decision Tree for Communication Pattern:\n\nStart: Need communication between nodes\n   \u2193\nQuestion: Is this continuous data stream?\n   \u251c\u2500 Yes \u2192 USE TOPIC\n   \u2502         Examples: sensor data, state, commands\n   \u2502\n   \u2514\u2500 No \u2192 Question: Is this a long-running task?\n           \u251c\u2500 Yes \u2192 USE ACTION\n           \u2502         Examples: navigation, manipulation, trajectories\n           \u2502\n           \u2514\u2500 No \u2192 USE SERVICE\n                     Examples: config changes, queries, computations\n\nTopic Characteristics:\n   \u2713 Continuous/streaming\n   \u2713 Latest value matters\n   \u2713 One-to-many\n   \u2713 Asynchronous\n   \u2717 No confirmation\n   \u2717 No feedback\n\nService Characteristics:\n   \u2713 Request-response\n   \u2713 Confirmation needed\n   \u2713 Quick execution\n   \u2713 Synchronous\n   \u2717 One-to-one only\n   \u2717 Blocking\n   \u2717 No progress updates\n\nAction Characteristics:\n   \u2713 Long-running\n   \u2713 Progress feedback\n   \u2713 Cancellable\n   \u2713 Asynchronous\n   \u2713 Confirmation (result)\n   \u2717 More complex\n   \u2717 One-to-one only\n"})}),"\n",(0,r.jsx)(n.h3,{id:"diagram-4-launch-system-hierarchy",children:"Diagram 4: Launch System Hierarchy"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Launch File Composition:\n\nmain.launch.py\n\u2502\n\u251c\u2500\u2500 sensors.launch.py\n\u2502   \u251c\u2500\u2500 Node: camera_driver\n\u2502   \u251c\u2500\u2500 Node: lidar_driver\n\u2502   \u2514\u2500\u2500 Node: imu_driver\n\u2502\n\u251c\u2500\u2500 perception.launch.py\n\u2502   \u251c\u2500\u2500 Include: object_detection.launch.py\n\u2502   \u2502   \u251c\u2500\u2500 Node: detector\n\u2502   \u2502   \u2514\u2500\u2500 Node: tracker\n\u2502   \u2514\u2500\u2500 Include: localization.launch.py\n\u2502       \u251c\u2500\u2500 Node: visual_odometry\n\u2502       \u2514\u2500\u2500 Node: sensor_fusion\n\u2502\n\u2514\u2500\u2500 control.launch.py\n    \u251c\u2500\u2500 Node: motor_controller\n    \u251c\u2500\u2500 Node: safety_monitor\n    \u2514\u2500\u2500 Include: robot_description.launch.py\n        \u2514\u2500\u2500 Node: robot_state_publisher\n\nExecution:\n1. Parse main.launch.py\n2. Recursively include all sub-launch files\n3. Resolve all parameters and remappings\n4. Start nodes in dependency order\n5. Monitor node health\n"})}),"\n",(0,r.jsx)(n.h3,{id:"diagram-5-multi-node-system-architecture",children:"Diagram 5: Multi-Node System Architecture"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Humanoid Robot Multi-Node System:\n\nSensor Nodes:\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Camera  \u2502  \u2502  LiDAR  \u2502  \u2502   IMU   \u2502  \u2502  Force  \u2502\n\u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518\n     \u2502            \u2502            \u2502            \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                      \u2193 (topics)\n              Perception Nodes:\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2193                \u2193                \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Detector\u2502  \u2502 Localization \u2502  \u2502Point Cloud\u2502\n\u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518\n     \u2502              \u2502                 \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                    \u2193 (topics)\n           Planning Nodes:\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2193              \u2193              \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Global  \u2502  \u2502   Local    \u2502  \u2502  Task   \u2502\n\u2502 Planner \u2502  \u2502  Planner   \u2502  \u2502 Planner \u2502\n\u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518\n     \u2502             \u2502              \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                   \u2193 (actions, topics)\n          Control Nodes:\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2193             \u2193              \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Joint   \u2502  \u2502 Balance \u2502  \u2502  Safety  \u2502\n\u2502Controller\u2502  \u2502Controller\u2502  \u2502 Monitor  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518\n      \u2502            \u2502            \u2502\n      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                   \u2193\n            [Hardware Interface]\n                   \u2193\n              [Robot Motors]\n\nData Flow: Sensors \u2192 Perception \u2192 Planning \u2192 Control \u2192 Hardware\n"})}),"\n",(0,r.jsx)(n.h2,{id:"key-concepts-summary",children:"Key Concepts Summary"}),"\n",(0,r.jsx)(n.h3,{id:"package",children:"Package"}),"\n",(0,r.jsx)(n.p,{children:"Fundamental organizational unit containing nodes, launch files, configuration, and dependencies. Encapsulates related functionality."}),"\n",(0,r.jsx)(n.h3,{id:"publisher",children:"Publisher"}),"\n",(0,r.jsx)(n.p,{children:"Component that produces data on a topic. Announces topic and type, serializes messages, sends via DDS."}),"\n",(0,r.jsx)(n.h3,{id:"subscriber",children:"Subscriber"}),"\n",(0,r.jsx)(n.p,{children:"Component that consumes data from a topic. Registers interest, receives messages, invokes callbacks."}),"\n",(0,r.jsx)(n.h3,{id:"launch-file",children:"Launch File"}),"\n",(0,r.jsx)(n.p,{children:"Script that starts multiple nodes with configuration, parameters, and remappings. Enables one-command system startup."}),"\n",(0,r.jsx)(n.h3,{id:"parameter",children:"Parameter"}),"\n",(0,r.jsx)(n.p,{children:"Runtime configuration value. Can be static (set at startup) or dynamic (changeable during execution)."}),"\n",(0,r.jsx)(n.h3,{id:"colcon",children:"Colcon"}),"\n",(0,r.jsx)(n.p,{children:"Build tool that discovers packages, resolves dependencies, invokes build systems, and manages installation."}),"\n",(0,r.jsx)(n.h3,{id:"namespace",children:"Namespace"}),"\n",(0,r.jsx)(n.p,{children:"Hierarchical naming scheme for organizing topics, services, and nodes. Prevents naming conflicts."}),"\n",(0,r.jsx)(n.h3,{id:"workspace",children:"Workspace"}),"\n",(0,r.jsx)(n.p,{children:"Directory containing source, build, and install spaces for ROS 2 packages. Supports overlaying for extending functionality."}),"\n",(0,r.jsx)(n.h2,{id:"knowledge-checkpoint",children:"Knowledge Checkpoint"}),"\n",(0,r.jsx)(n.p,{children:"Test your understanding of this chapter's concepts:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Package Organization:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Why is single responsibility important for package design?"}),"\n",(0,r.jsx)(n.li,{children:"You're building a camera driver that also performs image processing. Should this be one package or two? Justify your answer."}),"\n",(0,r.jsxs)(n.li,{children:["Explain the purpose of ",(0,r.jsx)(n.code,{children:"package.xml"})," and why dependencies must be declared accurately."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Communication Patterns:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A humanoid robot must continuously send joint position updates to a visualization tool. Which communication pattern and why?"}),"\n",(0,r.jsx)(n.li,{children:"A planning node needs to compute inverse kinematics for a target pose. The computation takes 50ms. Which communication pattern and why?"}),"\n",(0,r.jsx)(n.li,{children:"A robot navigates to a goal 20 meters away, taking 30 seconds. You want progress updates every second and ability to cancel. Which communication pattern?"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Publishers and Subscribers:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Explain how DDS enables publishers and subscribers to find each other without a central master."}),"\n",(0,r.jsx)(n.li,{children:"Why is message serialization necessary for network communication?"}),"\n",(0,r.jsx)(n.li,{children:'What happens if a subscriber has "Reliable" QoS but the publisher has "Best Effort" QoS?'}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Launch Systems:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"You have 15 nodes to start for your humanoid robot. Why use a launch file instead of manually starting each node?"}),"\n",(0,r.jsx)(n.li,{children:"Explain the benefits of composing launch files (including other launch files) versus one monolithic launch file."}),"\n",(0,r.jsx)(n.li,{children:"How would you use conditional launching to start different nodes in simulation versus on real hardware?"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"What is the advantage of using parameters versus hardcoding values in node source code?"}),"\n",(0,r.jsx)(n.li,{children:"Explain the parameter priority hierarchy (command line, launch file, YAML file, default)."}),"\n",(0,r.jsx)(n.li,{children:"When would you use dynamic parameters that can change at runtime versus static parameters set at startup?"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Build System:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Why does colcon need to resolve package dependencies before building?"}),"\n",(0,r.jsx)(n.li,{children:"Explain the difference between build dependencies and execution dependencies."}),"\n",(0,r.jsx)(n.li,{children:"What is workspace overlaying and why is it useful?"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"System Design:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Design the node structure for a humanoid robot that must detect objects, navigate around obstacles, and grasp target objects. Identify nodes, topics, services, and actions."}),"\n",(0,r.jsx)(n.li,{children:"Should sensor drivers run in the same node as perception algorithms? Why or why not?"}),"\n",(0,r.jsx)(n.li,{children:"Explain how namespaces help organize a complex multi-robot system."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"chapter-summary",children:"Chapter Summary"}),"\n",(0,r.jsx)(n.p,{children:"This chapter explored building systems with ROS 2:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Package Structure:"})," Packages are the fundamental organizational unit, containing nodes, launch files, configuration, and interface definitions. Standard directory structure and naming conventions promote consistency and discoverability."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Publishers and Subscribers:"})," Topic-based communication uses DDS for discovery, serialization, and distribution. Publishers and subscribers are decoupled, enabling flexible many-to-many data flow. Zero-copy transport optimizes performance for large messages."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Communication Pattern Selection:"})," Topics for streaming data, services for request-response, actions for long-running tasks with feedback. Choosing appropriately is critical for system performance and maintainability."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Launch Systems:"})," Launch files automate starting multi-node systems with correct configuration. Composition, conditional launching, and parameterization enable reusable, flexible launch configurations."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Parameter Management:"})," Parameters enable runtime configuration without recompilation. YAML files, launch files, and command-line arguments provide flexible configuration sources. Dynamic parameters support runtime tuning."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Build System:"})," Colcon discovers packages, resolves dependencies, and orchestrates builds. Incremental building and parallel compilation optimize development workflows. Workspace overlaying extends base installations."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Multi-Node Design:"})," Effective systems decompose functionality into focused, loosely-coupled nodes. Careful communication architecture, namespace organization, and lifecycle management create robust, scalable systems."]}),"\n",(0,r.jsx)(n.p,{children:"These tools and patterns form the foundation for building the humanoid robot systems we develop in subsequent chapters."}),"\n",(0,r.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Official Documentation:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ROS 2 Package Creation Tutorials"}),"\n",(0,r.jsx)(n.li,{children:"ROS 2 Launch System Documentation"}),"\n",(0,r.jsx)(n.li,{children:"Colcon Build System Guide"}),"\n",(0,r.jsx)(n.li,{children:"ROS 2 Design Patterns"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Books:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'"A Concise Introduction to Robot Programming with ROS 2" by Francisco Mart\xedn Rico'}),"\n",(0,r.jsx)(n.li,{children:'"ROS 2 Cookbook" (community resource)'}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Papers:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'"Design Patterns for Robot Programming with ROS" (various authors)'}),"\n",(0,r.jsx)(n.li,{children:'"ROS 2 Package Architecture Best Practices"'}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Online Resources:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ROS 2 Examples and Demos (ros2/examples repository)"}),"\n",(0,r.jsx)(n.li,{children:"ROS 2 Launch File Examples"}),"\n",(0,r.jsx)(n.li,{children:"Parameter Management Tutorials"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Community Resources:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ROS Discourse (community discussion)"}),"\n",(0,r.jsx)(n.li,{children:"ROS Answers (Q&A)"}),"\n",(0,r.jsx)(n.li,{children:"GitHub ROS 2 repositories"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"looking-ahead",children:"Looking Ahead"}),"\n",(0,r.jsx)(n.p,{children:"With understanding of building systems in ROS 2, we now turn specifically to humanoid robots. The next chapter explores robot description formats (URDF), coordinate frame management (tf2), controller interfaces, and bridging AI agents to robot control. These humanoid-specific tools and patterns build on the ROS 2 foundation established in this chapter."})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>c,x:()=>t});var i=s(6540);const r={},a=i.createContext(r);function c(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);
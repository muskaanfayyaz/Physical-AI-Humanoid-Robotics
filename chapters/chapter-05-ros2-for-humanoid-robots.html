<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-chapters/chapter-05-ros2-for-humanoid-robots" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Chapter 5: ROS 2 for Humanoid Robots | Physical AI &amp; Humanoid Robotics</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://muskaanfayyaz.github.io/Physical-AI-Humanoid-Robotics/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://muskaanfayyaz.github.io/Physical-AI-Humanoid-Robotics/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://muskaanfayyaz.github.io/Physical-AI-Humanoid-Robotics/chapters/chapter-05-ros2-for-humanoid-robots"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Chapter 5: ROS 2 for Humanoid Robots | Physical AI &amp; Humanoid Robotics"><meta data-rh="true" name="description" content="Learning Objectives"><meta data-rh="true" property="og:description" content="Learning Objectives"><link data-rh="true" rel="icon" href="/Physical-AI-Humanoid-Robotics/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://muskaanfayyaz.github.io/Physical-AI-Humanoid-Robotics/chapters/chapter-05-ros2-for-humanoid-robots"><link data-rh="true" rel="alternate" href="https://muskaanfayyaz.github.io/Physical-AI-Humanoid-Robotics/chapters/chapter-05-ros2-for-humanoid-robots" hreflang="en"><link data-rh="true" rel="alternate" href="https://muskaanfayyaz.github.io/Physical-AI-Humanoid-Robotics/chapters/chapter-05-ros2-for-humanoid-robots" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Chapter 5: ROS 2 for Humanoid Robots","item":"https://muskaanfayyaz.github.io/Physical-AI-Humanoid-Robotics/chapters/chapter-05-ros2-for-humanoid-robots"}]}</script><link rel="stylesheet" href="/Physical-AI-Humanoid-Robotics/assets/css/styles.f1b00d5d.css">
<script src="/Physical-AI-Humanoid-Robotics/assets/js/runtime~main.adb20441.js" defer="defer"></script>
<script src="/Physical-AI-Humanoid-Robotics/assets/js/main.cdf85b06.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Physical-AI-Humanoid-Robotics/"><div class="navbar__logo"><img src="/Physical-AI-Humanoid-Robotics/img/logo-transparent.png" alt="Physical AI Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Physical-AI-Humanoid-Robotics/img/logo-transparent.png" alt="Physical AI Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Physical AI &amp; Humanoid Robotics</b></a><a class="navbar__item navbar__link" href="/Physical-AI-Humanoid-Robotics/">Textbook</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/muskaanfayyaz/Physical-AI-Humanoid-Robotics" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Physical-AI-Humanoid-Robotics/"><span title="About" class="linkLabel_WmDU">About</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Physical-AI-Humanoid-Robotics/chapters/chapter-01-introduction-to-physical-ai"><span title="Weeks 1-2: Foundations" class="categoryLinkLabel_W154">Weeks 1-2: Foundations</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/Physical-AI-Humanoid-Robotics/chapters/chapter-03-introduction-to-ros2"><span title="Weeks 3-5: ROS 2 Fundamentals" class="categoryLinkLabel_W154">Weeks 3-5: ROS 2 Fundamentals</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Physical-AI-Humanoid-Robotics/chapters/chapter-03-introduction-to-ros2"><span title="Chapter 3: Introduction to ROS 2" class="linkLabel_WmDU">Chapter 3: Introduction to ROS 2</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Physical-AI-Humanoid-Robotics/chapters/chapter-04-building-with-ros2"><span title="Chapter 4: Building with ROS 2" class="linkLabel_WmDU">Chapter 4: Building with ROS 2</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Physical-AI-Humanoid-Robotics/chapters/chapter-05-ros2-for-humanoid-robots"><span title="Chapter 5: ROS 2 for Humanoid Robots" class="linkLabel_WmDU">Chapter 5: ROS 2 for Humanoid Robots</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Physical-AI-Humanoid-Robotics/chapters/chapter-06-physics-simulation-with-gazebo"><span title="Weeks 6-7: Simulation" class="categoryLinkLabel_W154">Weeks 6-7: Simulation</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Physical-AI-Humanoid-Robotics/chapters/chapter-08-nvidia-isaac-platform"><span title="Weeks 8-10: NVIDIA Isaac Platform" class="categoryLinkLabel_W154">Weeks 8-10: NVIDIA Isaac Platform</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Physical-AI-Humanoid-Robotics/chapters/chapter-11-humanoid-robot-kinematics-and-dynamics"><span title="Weeks 11-12: Humanoid Development" class="categoryLinkLabel_W154">Weeks 11-12: Humanoid Development</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Physical-AI-Humanoid-Robotics/chapters/chapter-15-conversational-robotics"><span title="Week 13: Conversational AI" class="categoryLinkLabel_W154">Week 13: Conversational AI</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Physical-AI-Humanoid-Robotics/chapters/chapter-16-sim-to-real-transfer"><span title="Final Weeks: Deployment &amp; Capstone" class="categoryLinkLabel_W154">Final Weeks: Deployment &amp; Capstone</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Physical-AI-Humanoid-Robotics/chapters/appendix-a-hardware-setup-guides"><span title="Reference Materials" class="categoryLinkLabel_W154">Reference Materials</span></a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Physical-AI-Humanoid-Robotics/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Weeks 3-5: ROS 2 Fundamentals</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Chapter 5: ROS 2 for Humanoid Robots</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Chapter 5: ROS 2 for Humanoid Robots</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="learning-objectives">Learning Objectives<a href="#learning-objectives" class="hash-link" aria-label="Direct link to Learning Objectives" title="Direct link to Learning Objectives" translate="no">​</a></h2>
<p>By the end of this chapter, you will be able to:</p>
<ul>
<li class="">Understand URDF (Unified Robot Description Format) and how it represents robot structure</li>
<li class="">Analyze kinematic chains and joint hierarchies in humanoid robots</li>
<li class="">Explain the tf2 transform system and coordinate frame management</li>
<li class="">Describe the roles of robot_state_publisher and joint_state_publisher</li>
<li class="">Understand controller interfaces and the ros2_control framework</li>
<li class="">Design architectures for bridging AI agents to robot controllers</li>
<li class="">Utilize RViz2 for visualization and debugging humanoid systems</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction" translate="no">​</a></h2>
<p>Humanoid robots present unique challenges compared to simpler robotic systems. A humanoid has 20-30+ joints arranged in kinematic chains (legs, arms, torso, head), each joint requiring coordinated control. The robot&#x27;s structure must be described precisely for physics simulation, collision checking, and motion planning. Coordinate frames must be managed for sensors, end effectors, and the environment. AI systems must translate high-level intentions into low-level motor commands.</p>
<p>ROS 2 provides specialized tools for humanoid robotics: URDF for describing robot geometry and kinematics, tf2 for managing coordinate transformations, ros2_control for hardware abstraction and controller management, and RViz2 for visualization. This chapter explores these humanoid-specific tools and patterns, building on the ROS 2 foundations from previous chapters.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="urdf-unified-robot-description-format">URDF: Unified Robot Description Format<a href="#urdf-unified-robot-description-format" class="hash-link" aria-label="Direct link to URDF: Unified Robot Description Format" title="Direct link to URDF: Unified Robot Description Format" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-urdf">What is URDF?<a href="#what-is-urdf" class="hash-link" aria-label="Direct link to What is URDF?" title="Direct link to What is URDF?" translate="no">​</a></h3>
<p>URDF is an XML format for describing robot structure. A URDF file defines:</p>
<p><strong>Links:</strong> Rigid bodies (bones in humanoid analogy). Each link has:</p>
<ul>
<li class="">Visual geometry (for visualization)</li>
<li class="">Collision geometry (for collision checking)</li>
<li class="">Inertial properties (mass, center of mass, inertia tensor)</li>
</ul>
<p><strong>Joints:</strong> Connections between links (like biological joints). Each joint has:</p>
<ul>
<li class="">Type (revolute, prismatic, fixed, continuous, planar, floating)</li>
<li class="">Parent and child links</li>
<li class="">Axis of rotation/translation</li>
<li class="">Limits (position, velocity, effort)</li>
<li class="">Dynamics (damping, friction)</li>
</ul>
<p><strong>Sensors:</strong> Cameras, LiDAR, IMU specifications and mounting locations</p>
<p><strong>Actuators:</strong> Motor specifications (for simulation)</p>
<p>The URDF provides a complete geometric and kinematic description that physics simulators, motion planners, and visualization tools can interpret.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="urdf-structure">URDF Structure<a href="#urdf-structure" class="hash-link" aria-label="Direct link to URDF Structure" title="Direct link to URDF Structure" translate="no">​</a></h3>
<p>A simple URDF snippet for a joint and links:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">robot</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">humanoid</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Base link (torso) --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">torso</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">visual</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">geometry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">box</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">size</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.3 0.2 0.4</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">geometry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">visual</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">collision</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">geometry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">box</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">size</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.3 0.2 0.4</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">geometry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">collision</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">inertial</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">mass</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">15.0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">inertia</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ixx</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1.0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ixy</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ixz</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">iyy</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1.0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">iyz</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">izz</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1.0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">inertial</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">link</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Shoulder joint --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">joint</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">right_shoulder_pitch</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">revolute</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">parent</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">link</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">torso</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">child</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">link</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">upper_arm_right</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">origin</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xyz</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.15 0 0.15</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">rpy</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0 0 0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">axis</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xyz</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0 1 0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">limit</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">lower</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">-1.57</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">upper</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1.57</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">effort</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">100</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">velocity</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">2.0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dynamics</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">damping</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.5</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">friction</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">joint</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Upper arm link --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">upper_arm_right</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">visual</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">geometry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">cylinder</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">length</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.3</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">radius</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.05</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">geometry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">visual</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">collision</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">geometry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">cylinder</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">length</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.3</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">radius</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.05</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">geometry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">collision</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">inertial</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">mass</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">2.0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">inertia</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ixx</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ixy</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ixz</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">iyy</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">iyz</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">izz</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.01</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">inertial</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">link</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">robot</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<p>This defines a torso link, a revolute shoulder joint, and an upper arm link. The joint connects torso (parent) to upper arm (child), rotates around the Y-axis, and has position and torque limits.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="joint-types">Joint Types<a href="#joint-types" class="hash-link" aria-label="Direct link to Joint Types" title="Direct link to Joint Types" translate="no">​</a></h3>
<p>URDF supports several joint types:</p>
<p><strong>Revolute:</strong> Rotates around an axis with limits (e.g., elbow, knee)</p>
<ul>
<li class="">Range: limited (e.g., -90° to +90°)</li>
<li class="">Use: Most humanoid joints</li>
</ul>
<p><strong>Continuous:</strong> Rotates around an axis without limits (e.g., wheel)</p>
<ul>
<li class="">Range: unlimited</li>
<li class="">Use: Rare in humanoids (perhaps head yaw in some designs)</li>
</ul>
<p><strong>Prismatic:</strong> Translates along an axis (e.g., linear actuator)</p>
<ul>
<li class="">Range: limited linear motion</li>
<li class="">Use: Telescoping mechanisms, grippers</li>
</ul>
<p><strong>Fixed:</strong> No motion (rigid connection)</p>
<ul>
<li class="">Use: Connecting sensor mounts, cosmetic parts</li>
</ul>
<p><strong>Planar:</strong> Moves in a plane</p>
<ul>
<li class="">Use: Specialized mechanisms</li>
</ul>
<p><strong>Floating:</strong> Six degrees of freedom (3 translation, 3 rotation)</p>
<ul>
<li class="">Use: Base of mobile robot relative to world frame</li>
</ul>
<p>Humanoid joints are predominantly revolute (shoulders, elbows, hips, knees, ankles), with fixed joints for sensor mounts and floating joints for the base.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="visual-vs-collision-geometry">Visual vs. Collision Geometry<a href="#visual-vs-collision-geometry" class="hash-link" aria-label="Direct link to Visual vs. Collision Geometry" title="Direct link to Visual vs. Collision Geometry" translate="no">​</a></h3>
<p>URDF separates visual and collision geometry for efficiency:</p>
<p><strong>Visual Geometry:</strong></p>
<ul>
<li class="">High-detail meshes for realistic visualization</li>
<li class="">Complex textures and colors</li>
<li class="">Computationally expensive for collision checking</li>
<li class="">Example: Detailed humanoid skin mesh</li>
</ul>
<p><strong>Collision Geometry:</strong></p>
<ul>
<li class="">Simplified shapes (boxes, cylinders, spheres)</li>
<li class="">Approximate the link&#x27;s envelope</li>
<li class="">Fast collision checking</li>
<li class="">Example: Cylinder approximating arm</li>
</ul>
<p>This separation allows beautiful visualization while maintaining real-time collision detection performance.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="inertial-properties">Inertial Properties<a href="#inertial-properties" class="hash-link" aria-label="Direct link to Inertial Properties" title="Direct link to Inertial Properties" translate="no">​</a></h3>
<p>Accurate inertial properties are critical for physics simulation:</p>
<p><strong>Mass:</strong> Total mass of the link (kilograms)</p>
<p><strong>Center of Mass:</strong> Point around which mass is distributed (relative to link frame)</p>
<p><strong>Inertia Tensor:</strong> 3x3 matrix describing resistance to rotation</p>
<ul>
<li class="">Diagonal elements (Ixx, Iyy, Izz): moments of inertia around principal axes</li>
<li class="">Off-diagonal elements (Ixy, Ixz, Iyz): products of inertia</li>
</ul>
<p>Inaccurate inertial properties cause unrealistic simulation behavior—robots that collapse, spin uncontrollably, or float. For real humanoid robots, inertial properties should match physical measurements.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="xacro-programmable-urdf">Xacro: Programmable URDF<a href="#xacro-programmable-urdf" class="hash-link" aria-label="Direct link to Xacro: Programmable URDF" title="Direct link to Xacro: Programmable URDF" translate="no">​</a></h3>
<p>Raw URDF is verbose and repetitive. Xacro (XML Macros) adds programming constructs:</p>
<p><strong>Variables:</strong></p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">xacro:</span><span class="token tag" style="color:#00009f">property</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">arm_length</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.3</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">cylinder</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">length</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${arm_length}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">radius</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.05</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre></div></div>
<p><strong>Macros:</strong></p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">xacro:</span><span class="token tag" style="color:#00009f">macro</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">arm</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">params</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">prefix</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${prefix}_upper_arm</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">...</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">link</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">joint</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${prefix}_shoulder</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">...</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">joint</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${prefix}_forearm</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">...</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">link</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">joint</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">${prefix}_elbow</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">...</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">joint</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">xacro:</span><span class="token tag" style="color:#00009f">macro</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Instantiate for both arms --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">xacro:</span><span class="token tag" style="color:#00009f">arm</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">prefix</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">left</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">xacro:</span><span class="token tag" style="color:#00009f">arm</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">prefix</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">right</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre></div></div>
<p><strong>Includes:</strong></p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">xacro:</span><span class="token tag" style="color:#00009f">include</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">filename</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">common_materials.xacro</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">xacro:</span><span class="token tag" style="color:#00009f">include</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">filename</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">sensors.xacro</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre></div></div>
<p>Xacro reduces duplication, especially for symmetric humanoids (left/right arms and legs identical).</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="urdf-best-practices">URDF Best Practices<a href="#urdf-best-practices" class="hash-link" aria-label="Direct link to URDF Best Practices" title="Direct link to URDF Best Practices" translate="no">​</a></h3>
<p><strong>Modular Design:</strong> Separate robot into logical components (torso, arms, legs, head).</p>
<p><strong>Consistent Naming:</strong> Use clear, systematic names (<code>left_shoulder_pitch</code>, not <code>ls_p</code>).</p>
<p><strong>Coordinate Frame Conventions:</strong> Follow ROS standards (X forward, Y left, Z up).</p>
<p><strong>Realistic Inertia:</strong> Use CAD software or measurement to get accurate inertial properties.</p>
<p><strong>Simplified Collision:</strong> Use primitive shapes when possible for performance.</p>
<p><strong>Test Incrementally:</strong> Build URDF incrementally, testing visualization and simulation at each step.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="kinematic-chains-and-joint-hierarchies">Kinematic Chains and Joint Hierarchies<a href="#kinematic-chains-and-joint-hierarchies" class="hash-link" aria-label="Direct link to Kinematic Chains and Joint Hierarchies" title="Direct link to Kinematic Chains and Joint Hierarchies" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="understanding-kinematic-chains">Understanding Kinematic Chains<a href="#understanding-kinematic-chains" class="hash-link" aria-label="Direct link to Understanding Kinematic Chains" title="Direct link to Understanding Kinematic Chains" translate="no">​</a></h3>
<p>A kinematic chain is a series of rigid links connected by joints. In humanoids:</p>
<p><strong>Serial Chains:</strong> Links connected end-to-end (e.g., shoulder → upper arm → forearm → wrist → hand)</p>
<p><strong>Tree Structure:</strong> Humanoids are kinematic trees with the torso as root and limbs as branches</p>
<p><strong>Degrees of Freedom:</strong> Number of independent joint motions. A typical humanoid:</p>
<ul>
<li class="">Torso: 3 DOF (roll, pitch, yaw)</li>
<li class="">Arm: 7 DOF (3 shoulder, 1 elbow, 3 wrist)</li>
<li class="">Leg: 6 DOF (3 hip, 1 knee, 2 ankle)</li>
<li class="">Head: 2 DOF (pan, tilt)</li>
<li class="">Hand: 5+ DOF (finger joints)</li>
<li class="">Total: 30+ DOF</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="joint-hierarchy-representation">Joint Hierarchy Representation<a href="#joint-hierarchy-representation" class="hash-link" aria-label="Direct link to Joint Hierarchy Representation" title="Direct link to Joint Hierarchy Representation" translate="no">​</a></h3>
<p>Humanoid joint hierarchy (simplified):</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[base_link] (floating base)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[torso]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── [left_upper_leg]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │       └── [left_lower_leg]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │               └── [left_foot]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── [right_upper_leg]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │       └── [right_lower_leg]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │               └── [right_foot]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── [left_upper_arm]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │       └── [left_forearm]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │               └── [left_hand]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── [right_upper_arm]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │       └── [right_forearm]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │               └── [right_hand]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── [head]</span><br></span></code></pre></div></div>
<p>Each link inherits transformations from its parent. Moving the torso moves all limbs; moving the shoulder moves the entire arm.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="forward-kinematics">Forward Kinematics<a href="#forward-kinematics" class="hash-link" aria-label="Direct link to Forward Kinematics" title="Direct link to Forward Kinematics" translate="no">​</a></h3>
<p>Forward kinematics computes end effector position/orientation from joint angles:</p>
<p><strong>Input:</strong> Joint angles (θ1, θ2, ..., θn)</p>
<p><strong>Output:</strong> End effector pose (position + orientation) in world frame</p>
<p><strong>Process:</strong></p>
<ol>
<li class="">Start at base link</li>
<li class="">Apply transformation from each joint in chain</li>
<li class="">Multiply transformations sequentially</li>
<li class="">Result is end effector pose</li>
</ol>
<p><strong>Example:</strong> Given shoulder, elbow, and wrist angles, compute hand position.</p>
<p>Forward kinematics is straightforward—just matrix multiplication through the chain.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="inverse-kinematics">Inverse Kinematics<a href="#inverse-kinematics" class="hash-link" aria-label="Direct link to Inverse Kinematics" title="Direct link to Inverse Kinematics" translate="no">​</a></h3>
<p>Inverse kinematics computes joint angles needed to achieve a target end effector pose:</p>
<p><strong>Input:</strong> Desired end effector pose</p>
<p><strong>Output:</strong> Joint angles (θ1, θ2, ..., θn)</p>
<p><strong>Challenge:</strong> Inverse kinematics is much harder than forward kinematics:</p>
<ul>
<li class="">May have no solution (target unreachable)</li>
<li class="">May have multiple solutions (elbow up vs. elbow down)</li>
<li class="">May have infinite solutions (redundant arms with 7 DOF)</li>
<li class="">Computational complexity increases with DOF</li>
</ul>
<p><strong>Solution Methods:</strong></p>
<ul>
<li class="">Analytical: Closed-form equations (fast but limited to specific geometries)</li>
<li class="">Numerical: Iterative optimization (general but slower)</li>
<li class="">Learning-based: Neural networks trained on IK solutions</li>
</ul>
<p>Motion planning systems heavily rely on IK to convert desired end effector goals into joint trajectories.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="jacobian-and-differential-kinematics">Jacobian and Differential Kinematics<a href="#jacobian-and-differential-kinematics" class="hash-link" aria-label="Direct link to Jacobian and Differential Kinematics" title="Direct link to Jacobian and Differential Kinematics" translate="no">​</a></h3>
<p>The Jacobian matrix relates joint velocities to end effector velocities:</p>
<p><strong>Jacobian (J):</strong> Partial derivatives of end effector position with respect to joint angles</p>
<p><strong>Velocity Relationship:</strong> ẋ = J θ̇</p>
<ul>
<li class="">ẋ: End effector velocity (6D: 3 linear, 3 angular)</li>
<li class="">θ̇: Joint velocities</li>
<li class="">J: 6 × n Jacobian matrix (n = number of joints)</li>
</ul>
<p><strong>Uses:</strong></p>
<ul>
<li class=""><strong>Velocity Control:</strong> Compute joint velocities for desired end effector velocity</li>
<li class=""><strong>Singularity Detection:</strong> When J loses rank, robot loses DOF (singularity)</li>
<li class=""><strong>Force Control:</strong> Map joint torques to end effector forces</li>
</ul>
<p>The Jacobian is fundamental to many robot control algorithms.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="tf2-transform-system">tf2: Transform System<a href="#tf2-transform-system" class="hash-link" aria-label="Direct link to tf2: Transform System" title="Direct link to tf2: Transform System" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-transform-management-matters">Why Transform Management Matters<a href="#why-transform-management-matters" class="hash-link" aria-label="Direct link to Why Transform Management Matters" title="Direct link to Why Transform Management Matters" translate="no">​</a></h3>
<p>Humanoid robots have dozens of coordinate frames:</p>
<p><strong>Robot Frames:</strong></p>
<ul>
<li class="">Base frame (robot origin)</li>
<li class="">Each link has a frame</li>
<li class="">Each joint has a frame</li>
<li class="">End effectors (hands, feet) have frames</li>
</ul>
<p><strong>Sensor Frames:</strong></p>
<ul>
<li class="">Camera frame</li>
<li class="">LiDAR frame</li>
<li class="">IMU frame</li>
<li class="">Force sensor frames</li>
</ul>
<p><strong>World Frames:</strong></p>
<ul>
<li class="">Map frame (global reference)</li>
<li class="">Odom frame (odometry reference)</li>
<li class="">Base frame (robot&#x27;s current location)</li>
</ul>
<p>Questions requiring transforms:</p>
<ul>
<li class="">Where is the detected object (camera frame) relative to the robot&#x27;s hand (hand frame)?</li>
<li class="">What is the robot&#x27;s position (base frame) in the map (map frame)?</li>
<li class="">Where should the foot (foot frame) be placed relative to the detected step (world frame)?</li>
</ul>
<p>tf2 manages these coordinate transformations automatically.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="tf2-architecture">tf2 Architecture<a href="#tf2-architecture" class="hash-link" aria-label="Direct link to tf2 Architecture" title="Direct link to tf2 Architecture" translate="no">​</a></h3>
<p>tf2 maintains a transform tree:</p>
<p><strong>Tree Structure:</strong> Frames connected in a tree (no loops). Each frame has one parent.</p>
<p><strong>Transform Specification:</strong> Each transform specifies:</p>
<ul>
<li class="">Parent frame</li>
<li class="">Child frame</li>
<li class="">Translation (x, y, z)</li>
<li class="">Rotation (quaternion: x, y, z, w)</li>
<li class="">Timestamp (when transform is valid)</li>
</ul>
<p><strong>Transform Lookup:</strong> Query &quot;what is the transform from frame A to frame B at time t?&quot;</p>
<p><strong>Chain Computation:</strong> tf2 finds the path through the tree from A to B and multiplies transforms along the path.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="static-vs-dynamic-transforms">Static vs. Dynamic Transforms<a href="#static-vs-dynamic-transforms" class="hash-link" aria-label="Direct link to Static vs. Dynamic Transforms" title="Direct link to Static vs. Dynamic Transforms" translate="no">​</a></h3>
<p><strong>Static Transforms:</strong> Don&#x27;t change over time</p>
<ul>
<li class="">Sensor mounting positions (camera on head)</li>
<li class="">Link-to-link transforms (defined by URDF)</li>
<li class="">Calibration offsets</li>
</ul>
<p><strong>Dynamic Transforms:</strong> Change over time</p>
<ul>
<li class="">Joint angles (link positions change as joints move)</li>
<li class="">Robot pose in world (changes as robot moves)</li>
<li class="">Object tracking (objects move in environment)</li>
</ul>
<p>Static transforms published once; dynamic transforms published continuously.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-frame-conventions">Common Frame Conventions<a href="#common-frame-conventions" class="hash-link" aria-label="Direct link to Common Frame Conventions" title="Direct link to Common Frame Conventions" translate="no">​</a></h3>
<p>ROS 2 follows standard naming and conventions:</p>
<p><strong>map:</strong> Global fixed frame (environment map reference)</p>
<p><strong>odom:</strong> Odometry frame (continuous, drift-prone estimate of robot pose)</p>
<p><strong>base_link:</strong> Robot&#x27;s base (usually at center of mass or between feet)</p>
<p><strong>Relationship:</strong></p>
<ul>
<li class="">map → odom: Corrects odometry drift (from localization)</li>
<li class="">odom → base_link: Odometry estimate (from wheel encoders, VIO)</li>
<li class="">base_link → sensors/links: Robot structure (from URDF + joint states)</li>
</ul>
<p><strong>Coordinate Convention:</strong></p>
<ul>
<li class="">X: Forward</li>
<li class="">Y: Left</li>
<li class="">Z: Up</li>
</ul>
<p>Following conventions ensures interoperability between packages.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="transform-broadcasting">Transform Broadcasting<a href="#transform-broadcasting" class="hash-link" aria-label="Direct link to Transform Broadcasting" title="Direct link to Transform Broadcasting" translate="no">​</a></h3>
<p>Nodes publish transforms to tf2:</p>
<p><strong>Static Transform Broadcaster:</strong></p>
<ul>
<li class="">Publishes fixed transforms</li>
<li class="">Example: Camera mount position on robot head</li>
<li class="">Published once at startup or infrequently</li>
</ul>
<p><strong>Transform Broadcaster:</strong></p>
<ul>
<li class="">Publishes dynamic transforms</li>
<li class="">Example: Robot position in world, joint angles</li>
<li class="">Published continuously (10-50 Hz typically)</li>
</ul>
<p><strong>Example:</strong> <code>robot_state_publisher</code> broadcasts transforms for all robot links based on joint angles.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="transform-listening">Transform Listening<a href="#transform-listening" class="hash-link" aria-label="Direct link to Transform Listening" title="Direct link to Transform Listening" translate="no">​</a></h3>
<p>Nodes query transforms from tf2:</p>
<p><strong>Transform Listener:</strong></p>
<ul>
<li class="">Subscribes to transform topics</li>
<li class="">Maintains transform buffer (history of transforms)</li>
<li class="">Provides lookup interface</li>
</ul>
<p><strong>Lookup Query:</strong></p>
<ul>
<li class="">Source frame</li>
<li class="">Target frame</li>
<li class="">Time (can query historical transforms)</li>
</ul>
<p><strong>Example:</strong> Motion planner queries &quot;hand position in base frame&quot; to check if target is reachable.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="transform-tree-example">Transform Tree Example<a href="#transform-tree-example" class="hash-link" aria-label="Direct link to Transform Tree Example" title="Direct link to Transform Tree Example" translate="no">​</a></h3>
<p>Humanoid robot transform tree:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[map]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[odom]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[base_link]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── [torso]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │     ├── [head]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │     │     ├── [camera_left]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │     │     └── [camera_right]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │     ├── [left_shoulder]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │     │     └── [left_upper_arm]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │     │           └── [left_forearm]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │     │                 └── [left_hand]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │     └── [right_shoulder]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │           └── [right_upper_arm]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                 └── [right_forearm]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                       └── [right_hand]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── [left_hip]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │     └── [left_upper_leg]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │           └── [left_lower_leg]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                 └── [left_foot]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └── [right_hip]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        └── [right_upper_leg]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              └── [right_lower_leg]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    └── [right_foot]</span><br></span></code></pre></div></div>
<p>To find &quot;left hand position in map frame&quot;, tf2 multiplies transforms along path: map → odom → base_link → torso → left_shoulder → left_upper_arm → left_forearm → left_hand.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="time-synchronization">Time Synchronization<a href="#time-synchronization" class="hash-link" aria-label="Direct link to Time Synchronization" title="Direct link to Time Synchronization" translate="no">​</a></h3>
<p>tf2 stores transform history, enabling time-synchronized queries:</p>
<p><strong>Use Case:</strong> Camera image captured at t=10.5s shows object. Robot&#x27;s hand was at different position then vs. now (t=11.0s). Need transform at t=10.5s to accurately plan grasp.</p>
<p><strong>Buffer Duration:</strong> Typically 10-30 seconds of history. Older transforms discarded.</p>
<p><strong>Interpolation:</strong> If exact timestamp not available, tf2 interpolates between nearby transforms.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="robot_state_publisher-and-joint_state_publisher">robot_state_publisher and joint_state_publisher<a href="#robot_state_publisher-and-joint_state_publisher" class="hash-link" aria-label="Direct link to robot_state_publisher and joint_state_publisher" title="Direct link to robot_state_publisher and joint_state_publisher" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="robot_state_publisher">robot_state_publisher<a href="#robot_state_publisher" class="hash-link" aria-label="Direct link to robot_state_publisher" title="Direct link to robot_state_publisher" translate="no">​</a></h3>
<p>The <code>robot_state_publisher</code> node is central to humanoid robot operation:</p>
<p><strong>Purpose:</strong> Publishes transforms for all robot links based on URDF and current joint states.</p>
<p><strong>Inputs:</strong></p>
<ul>
<li class="">URDF (robot description)</li>
<li class="">Joint states (joint positions from controllers or sensors)</li>
</ul>
<p><strong>Outputs:</strong></p>
<ul>
<li class="">tf2 transforms for all links</li>
</ul>
<p><strong>Process:</strong></p>
<ol>
<li class="">Parse URDF to understand kinematic tree</li>
<li class="">Subscribe to <code>/joint_states</code> topic</li>
<li class="">For each joint state update:<!-- -->
<ul>
<li class="">Compute forward kinematics for all links</li>
<li class="">Publish transforms to tf2</li>
</ul>
</li>
</ol>
<p><strong>Why Essential:</strong> Provides real-time robot geometry to all other nodes. Motion planners, collision checkers, and visualizers need to know where every link is.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="joint_state_publisher">joint_state_publisher<a href="#joint_state_publisher" class="hash-link" aria-label="Direct link to joint_state_publisher" title="Direct link to joint_state_publisher" translate="no">​</a></h3>
<p>The <code>joint_state_publisher</code> node provides joint states when hardware is not available:</p>
<p><strong>Purpose:</strong> Publish joint states for testing/visualization without real robot.</p>
<p><strong>Use Cases:</strong></p>
<ul>
<li class=""><strong>Simulation:</strong> Generate random or scripted joint movements</li>
<li class=""><strong>Debugging:</strong> Manually control joints via GUI to test robot description</li>
<li class=""><strong>Demonstration:</strong> Show robot capabilities without hardware</li>
</ul>
<p><strong>GUI Mode:</strong> Provides sliders to manually control each joint position.</p>
<p><strong>Not for Real Robots:</strong> On real hardware, joint states come from motor encoders or other sensors, not <code>joint_state_publisher</code>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="joint-state-message">Joint State Message<a href="#joint-state-message" class="hash-link" aria-label="Direct link to Joint State Message" title="Direct link to Joint State Message" translate="no">​</a></h3>
<p>Joint states published on <code>/joint_states</code> topic use <code>sensor_msgs/JointState</code>:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Header header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">string[] name           # Joint names</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">float64[] position      # Joint positions (radians or meters)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">float64[] velocity      # Joint velocities (rad/s or m/s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">float64[] effort        # Joint efforts (torques or forces)</span><br></span></code></pre></div></div>
<p><strong>Example:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">name: [&#x27;right_shoulder_pitch&#x27;, &#x27;right_elbow&#x27;, &#x27;right_wrist_roll&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">position: [0.5, 1.2, -0.3]  # radians</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">velocity: [0.1, 0.0, 0.05]  # rad/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">effort: [2.5, 1.0, 0.3]     # Nm</span><br></span></code></pre></div></div>
<p>All controllers and sensors must publish joint states in this format for <code>robot_state_publisher</code> to process.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="workflow-urdf-to-visualization">Workflow: URDF to Visualization<a href="#workflow-urdf-to-visualization" class="hash-link" aria-label="Direct link to Workflow: URDF to Visualization" title="Direct link to Workflow: URDF to Visualization" translate="no">​</a></h3>
<p>Typical workflow for humanoid robot:</p>
<ol>
<li class=""><strong>URDF Creation:</strong> Define robot structure (links, joints, geometry)</li>
<li class=""><strong>Parameter Server:</strong> Load URDF to ROS 2 parameter server (typically via launch file)</li>
<li class=""><strong>robot_state_publisher:</strong> Reads URDF, subscribes to <code>/joint_states</code></li>
<li class=""><strong>Joint Source:</strong> Either:<!-- -->
<ul>
<li class=""><code>joint_state_publisher</code> (GUI for testing)</li>
<li class="">Hardware interface (real robot motor encoders)</li>
<li class="">Simulation (Gazebo, Isaac Sim publishes joint states)</li>
</ul>
</li>
<li class=""><strong>Transform Publishing:</strong> <code>robot_state_publisher</code> computes and publishes all link transforms to tf2</li>
<li class=""><strong>Visualization:</strong> RViz2 subscribes to tf2 and <code>/robot_description</code> to display robot</li>
</ol>
<p>This pipeline enables seeing the robot move in RViz2 as joints change.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="controller-interfaces-and-ros2_control">Controller Interfaces and ros2_control<a href="#controller-interfaces-and-ros2_control" class="hash-link" aria-label="Direct link to Controller Interfaces and ros2_control" title="Direct link to Controller Interfaces and ros2_control" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-ros2_control">What is ros2_control?<a href="#what-is-ros2_control" class="hash-link" aria-label="Direct link to What is ros2_control?" title="Direct link to What is ros2_control?" translate="no">​</a></h3>
<p><code>ros2_control</code> is a framework for robot control in ROS 2. It provides:</p>
<p><strong>Hardware Abstraction:</strong> Unified interface for different motors, sensors, and actuators</p>
<p><strong>Controller Management:</strong> Loading, starting, stopping, and switching controllers</p>
<p><strong>Real-Time Support:</strong> Designed for real-time control loops (1-10 kHz)</p>
<p><strong>Modular Controllers:</strong> Reusable controllers for common tasks (joint position, velocity, effort control)</p>
<p><strong>Plugin Architecture:</strong> Extend with custom hardware interfaces and controllers</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="ros2_control-architecture">ros2_control Architecture<a href="#ros2_control-architecture" class="hash-link" aria-label="Direct link to ros2_control Architecture" title="Direct link to ros2_control Architecture" translate="no">​</a></h3>
<p>The framework has three layers:</p>
<p><strong>Hardware Interface:</strong></p>
<ul>
<li class="">Communicates with physical hardware (motor drivers, sensors)</li>
<li class="">Reads joint states (position, velocity, effort)</li>
<li class="">Writes joint commands (position, velocity, effort)</li>
<li class="">Implemented per robot (each robot needs custom hardware interface)</li>
</ul>
<p><strong>Controller Manager:</strong></p>
<ul>
<li class="">Loads and manages controllers</li>
<li class="">Routes commands and states between controllers and hardware</li>
<li class="">Handles controller lifecycle (inactive, active, error states)</li>
<li class="">Ensures only one controller writes to each joint</li>
</ul>
<p><strong>Controllers:</strong></p>
<ul>
<li class="">Implement control algorithms</li>
<li class="">Read joint states from hardware interface</li>
<li class="">Write commands to hardware interface</li>
<li class="">Examples: position controller, velocity controller, trajectory controller</li>
</ul>
<p><strong>Data Flow:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Hardware] ←→ [Hardware Interface] ←→ [Controller Manager] ←→ [Controllers]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              (read states,              (route data,          (control</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               write commands)            manage lifecycle)     algorithms)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="hardware-interface-concepts">Hardware Interface Concepts<a href="#hardware-interface-concepts" class="hash-link" aria-label="Direct link to Hardware Interface Concepts" title="Direct link to Hardware Interface Concepts" translate="no">​</a></h3>
<p>Hardware interface defines how to communicate with robot:</p>
<p><strong>Resource Declaration:</strong> Specify available joints and interfaces (position, velocity, effort)</p>
<p><strong>State Interfaces:</strong> Hardware provides current state</p>
<ul>
<li class="">position: Current joint angle</li>
<li class="">velocity: Current joint velocity</li>
<li class="">effort: Current joint torque</li>
</ul>
<p><strong>Command Interfaces:</strong> Hardware accepts commands</p>
<ul>
<li class="">position: Target joint angle</li>
<li class="">velocity: Target joint velocity</li>
<li class="">effort: Target joint torque</li>
</ul>
<p><strong>Example:</strong> A humanoid arm with 3 joints might export:</p>
<ul>
<li class="">State interfaces: <code>shoulder_pitch/position</code>, <code>elbow/position</code>, <code>wrist_roll/position</code>, plus velocity and effort for each</li>
<li class="">Command interfaces: <code>shoulder_pitch/effort</code>, <code>elbow/effort</code>, <code>wrist_roll/effort</code> (torque control)</li>
</ul>
<p>Controllers read state interfaces and write command interfaces.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-controllers">Common Controllers<a href="#common-controllers" class="hash-link" aria-label="Direct link to Common Controllers" title="Direct link to Common Controllers" translate="no">​</a></h3>
<p>ros2_control provides standard controllers:</p>
<p><strong>Joint State Broadcaster:</strong></p>
<ul>
<li class="">Reads joint states from hardware interface</li>
<li class="">Publishes to <code>/joint_states</code> topic</li>
<li class="">Required for <code>robot_state_publisher</code> to work</li>
</ul>
<p><strong>Position Controller:</strong></p>
<ul>
<li class="">Accepts target joint positions</li>
<li class="">Commands hardware to reach targets</li>
<li class="">Simple PID or more advanced control</li>
</ul>
<p><strong>Velocity Controller:</strong></p>
<ul>
<li class="">Accepts target joint velocities</li>
<li class="">Maintains desired velocity</li>
</ul>
<p><strong>Effort Controller:</strong></p>
<ul>
<li class="">Accepts target joint torques</li>
<li class="">Direct torque control</li>
</ul>
<p><strong>Joint Trajectory Controller:</strong></p>
<ul>
<li class="">Executes trajectories (sequences of waypoints with timing)</li>
<li class="">Interpolates between waypoints</li>
<li class="">Used by motion planners</li>
</ul>
<p><strong>Admittance Controller:</strong></p>
<ul>
<li class="">Compliant control (responds to external forces)</li>
<li class="">Essential for safe human-robot interaction</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="controller-manager">Controller Manager<a href="#controller-manager" class="hash-link" aria-label="Direct link to Controller Manager" title="Direct link to Controller Manager" translate="no">​</a></h3>
<p>The controller manager orchestrates controllers:</p>
<p><strong>Loading:</strong> Load controller plugins dynamically</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ros2 control load_controller joint_trajectory_controller</span><br></span></code></pre></div></div>
<p><strong>Configuration:</strong> Controllers configured via parameters (gains, limits, etc.)</p>
<p><strong>Lifecycle Management:</strong> Controllers have states:</p>
<ul>
<li class="">Unconfigured: Just loaded</li>
<li class="">Inactive: Configured but not controlling</li>
<li class="">Active: Actively controlling hardware</li>
<li class="">Finalized: Cleaned up</li>
</ul>
<p><strong>Switching:</strong> Can switch between controllers:</p>
<ul>
<li class="">Stop position controller</li>
<li class="">Start torque controller</li>
<li class="">Ensures smooth transitions</li>
</ul>
<p><strong>Exclusive Access:</strong> Prevents multiple controllers from fighting over same joints</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="real-time-considerations">Real-Time Considerations<a href="#real-time-considerations" class="hash-link" aria-label="Direct link to Real-Time Considerations" title="Direct link to Real-Time Considerations" translate="no">​</a></h3>
<p>Humanoid control requires real-time performance:</p>
<p><strong>Control Loop Frequency:</strong> 1-10 kHz for balance and manipulation</p>
<ul>
<li class="">Balance: 1-2 kHz (fast response to disturbances)</li>
<li class="">Joint control: 100-1000 Hz</li>
<li class="">Planning: 10-100 Hz</li>
</ul>
<p><strong>Determinism:</strong> Control loops must execute at precise intervals. Late execution causes instability.</p>
<p><strong>Real-Time OS:</strong> For hard real-time, use PREEMPT_RT Linux kernel</p>
<p><strong>ros2_control Design:</strong> Separates real-time (hardware interface, controllers) from non-real-time (ROS 2 communication) components. Real-time components run in dedicated threads.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="bridging-ai-agents-to-ros-controllers">Bridging AI Agents to ROS Controllers<a href="#bridging-ai-agents-to-ros-controllers" class="hash-link" aria-label="Direct link to Bridging AI Agents to ROS Controllers" title="Direct link to Bridging AI Agents to ROS Controllers" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-ai-to-robot-control-gap">The AI-to-Robot Control Gap<a href="#the-ai-to-robot-control-gap" class="hash-link" aria-label="Direct link to The AI-to-Robot Control Gap" title="Direct link to The AI-to-Robot Control Gap" translate="no">​</a></h3>
<p>Modern humanoid robots combine:</p>
<p><strong>High-Level AI:</strong> Large language models, vision transformers, reinforcement learning policies</p>
<ul>
<li class="">Operate on abstract goals (&quot;pick up the cup&quot;)</li>
<li class="">Run at low frequency (1-10 Hz)</li>
<li class="">Often run on GPU</li>
</ul>
<p><strong>Low-Level Control:</strong> Motor controllers, balance algorithms, trajectory execution</p>
<ul>
<li class="">Operate on joint commands</li>
<li class="">Run at high frequency (100-1000 Hz)</li>
<li class="">Often run on real-time CPU or microcontroller</li>
</ul>
<p><strong>Gap:</strong> AI outputs high-level intentions; controllers need low-level commands. Need architecture to bridge this gap.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="hierarchical-control-architecture">Hierarchical Control Architecture<a href="#hierarchical-control-architecture" class="hash-link" aria-label="Direct link to Hierarchical Control Architecture" title="Direct link to Hierarchical Control Architecture" translate="no">​</a></h3>
<p>Effective architecture uses hierarchy:</p>
<p><strong>Level 1: AI Agent (High-Level)</strong></p>
<ul>
<li class="">Input: Sensor data (images, point clouds), task description</li>
<li class="">Processing: LLM reasoning, object detection, scene understanding</li>
<li class="">Output: High-level goals (&quot;grasp object at position X,Y,Z&quot;)</li>
<li class="">Frequency: 1-10 Hz</li>
<li class="">Hardware: GPU</li>
</ul>
<p><strong>Level 2: Motion Planning (Mid-Level)</strong></p>
<ul>
<li class="">Input: High-level goals from AI</li>
<li class="">Processing: Path planning, inverse kinematics, collision avoidance</li>
<li class="">Output: Joint trajectories (sequences of joint angles with timing)</li>
<li class="">Frequency: 10-50 Hz</li>
<li class="">Hardware: CPU</li>
</ul>
<p><strong>Level 3: Controllers (Low-Level)</strong></p>
<ul>
<li class="">Input: Joint trajectories from planners</li>
<li class="">Processing: PID control, torque computation, balance</li>
<li class="">Output: Motor commands (voltages, torques)</li>
<li class="">Frequency: 100-1000 Hz</li>
<li class="">Hardware: Real-time CPU or microcontroller</li>
</ul>
<p><strong>Level 4: Hardware</strong></p>
<ul>
<li class="">Input: Motor commands from controllers</li>
<li class="">Processing: Motor driver electronics</li>
<li class="">Output: Actual joint motion</li>
<li class="">Frequency: 1-10 kHz</li>
<li class="">Hardware: Motor drivers, motors</li>
</ul>
<p><strong>Data Flow:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[AI Agent] --goals--&gt; [Motion Planner] --trajectories--&gt; [Controller] --commands--&gt; [Hardware]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ↑                        ↑                                ↑</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   |                        |                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Sensors] &lt;---- [State Estimation] &lt;---- [Joint States] &lt;----+</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="interface-patterns">Interface Patterns<a href="#interface-patterns" class="hash-link" aria-label="Direct link to Interface Patterns" title="Direct link to Interface Patterns" translate="no">​</a></h3>
<p>Several patterns bridge AI and control:</p>
<p><strong>Pattern 1: Action-Based Interface</strong></p>
<p>AI sends high-level goals as ROS 2 actions:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">AI Agent --NavigateToPose action--&gt; Navigation Stack</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         --GraspObject action-----&gt; Manipulation Planner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         --FollowPerson action----&gt; Person Tracking</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Each action server handles:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Goal decomposition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Motion planning</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Execution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Feedback to AI</span><br></span></code></pre></div></div>
<p><strong>Advantages:</strong> Clean separation, asynchronous, progress feedback
<strong>Use Case:</strong> Discrete tasks with clear goals</p>
<p><strong>Pattern 2: Topic-Based Interface</strong></p>
<p>AI publishes commands on topics, controllers subscribe:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">AI Agent --/cmd_vel topic--&gt; Velocity Controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         --/target_pose---&gt; Position Controller</span><br></span></code></pre></div></div>
<p><strong>Advantages:</strong> Simple, low latency, continuous control
<strong>Use Case:</strong> Continuous control (teleoperation, learned policies)</p>
<p><strong>Pattern 3: Behavior Trees</strong></p>
<p>Hierarchical state machine coordinates AI and control:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Behavior Tree]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── Sequence: Grasp Object</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │     ├── [AI: Detect Object] --object pose--&gt; context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │     ├── [Planning: Compute IK] --joint angles--&gt; context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │     ├── [Control: Move Arm] --execute trajectory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │     └── [Control: Close Gripper]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── Fallback: Recovery</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ├── [AI: Re-detect Object]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          └── [Control: Retreat to Safe Pose]</span><br></span></code></pre></div></div>
<p><strong>Advantages:</strong> Complex behaviors, error handling, modular
<strong>Use Case:</strong> Multi-step tasks requiring coordination</p>
<p><strong>Pattern 4: Shared Memory Interface</strong></p>
<p>AI and control share memory for high-frequency communication:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">AI Policy (GPU) --shared memory--&gt; Real-Time Controller (CPU)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   writes: target joint positions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   reads: current joint states</span><br></span></code></pre></div></div>
<p><strong>Advantages:</strong> Lowest latency, highest frequency
<strong>Use Case:</strong> Learned policies requiring tight control loop (RL policies)</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-llm-controlled-humanoid">Example: LLM-Controlled Humanoid<a href="#example-llm-controlled-humanoid" class="hash-link" aria-label="Direct link to Example: LLM-Controlled Humanoid" title="Direct link to Example: LLM-Controlled Humanoid" translate="no">​</a></h3>
<p>Architecture for LLM-controlled humanoid:</p>
<p><strong>Components:</strong></p>
<ol>
<li class="">
<p><strong>LLM Agent:</strong></p>
<ul>
<li class="">Receives natural language commands</li>
<li class="">Reasons about task decomposition</li>
<li class="">Publishes high-level action goals</li>
</ul>
</li>
<li class="">
<p><strong>Task Planner:</strong></p>
<ul>
<li class="">Subscribes to LLM goals</li>
<li class="">Breaks down into motion primitives</li>
<li class="">Sends action requests to motion planners</li>
</ul>
</li>
<li class="">
<p><strong>Motion Planners:</strong></p>
<ul>
<li class="">Navigation planner (MoveIt2 or Nav2)</li>
<li class="">Manipulation planner (MoveIt2)</li>
<li class="">Whole-body planner</li>
<li class="">Generate trajectories</li>
</ul>
</li>
<li class="">
<p><strong>Controller Manager:</strong></p>
<ul>
<li class="">Executes trajectories via joint trajectory controller</li>
<li class="">Monitors execution, reports status</li>
</ul>
</li>
<li class="">
<p><strong>Hardware Interface:</strong></p>
<ul>
<li class="">Sends commands to motors</li>
<li class="">Reads joint states</li>
</ul>
</li>
</ol>
<p><strong>Communication:</strong></p>
<ul>
<li class="">LLM → Task Planner: ROS 2 service or topic</li>
<li class="">Task Planner → Motion Planners: ROS 2 actions</li>
<li class="">Motion Planners → Controllers: ROS 2 actions (FollowJointTrajectory)</li>
<li class="">Controllers → Hardware: ros2_control interfaces</li>
</ul>
<p><strong>Example Flow:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">User: &quot;Pick up the red cup&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[LLM]: Parse command, identify object &quot;red cup&quot;, task &quot;pick up&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[LLM → Task Planner]: Goal: grasp(object=&quot;red cup&quot;, color=&quot;red&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Task Planner]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1. Detect red cup (call vision service)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  2. Plan grasp approach (call manipulation planner)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  3. Execute grasp trajectory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Vision Service]: Returns cup pose</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Manipulation Planner]: Computes IK, plans collision-free path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Manipulation Planner → Controller]: FollowJointTrajectory action</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Controller]: Executes trajectory, monitors joint states</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Hardware]: Motors move arm to grasp cup</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="learned-policy-integration">Learned Policy Integration<a href="#learned-policy-integration" class="hash-link" aria-label="Direct link to Learned Policy Integration" title="Direct link to Learned Policy Integration" translate="no">​</a></h3>
<p>For reinforcement learning policies:</p>
<p><strong>Training:</strong> Policy trained in simulation (Gazebo, Isaac Sim)</p>
<p><strong>Deployment:</strong> Policy runs in ROS 2 node</p>
<p><strong>Interface:</strong></p>
<ul>
<li class="">Policy subscribes to sensor topics (joint states, camera images)</li>
<li class="">Policy publishes to command topics (joint positions or torques)</li>
<li class="">Control frequency: Match training frequency (often 50-100 Hz)</li>
</ul>
<p><strong>Challenges:</strong></p>
<ul>
<li class="">Sim-to-real gap: Policy trained in simulation may fail on real hardware</li>
<li class="">Safety: Learned policies can be unpredictable; need safety monitors</li>
<li class="">Timing: ROS 2 topic communication has jitter; may need shared memory for determinism</li>
</ul>
<p><strong>Safety Wrapper:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Policy Node] --raw commands--&gt; [Safety Monitor] --safe commands--&gt; [Controller]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      ↑</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               [Joint States]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               [Collision Detector]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               [Emergency Stop]</span><br></span></code></pre></div></div>
<p>Safety monitor validates policy commands before sending to hardware.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="rviz2-visualization-and-debugging">RViz2: Visualization and Debugging<a href="#rviz2-visualization-and-debugging" class="hash-link" aria-label="Direct link to RViz2: Visualization and Debugging" title="Direct link to RViz2: Visualization and Debugging" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-rviz2">What is RViz2?<a href="#what-is-rviz2" class="hash-link" aria-label="Direct link to What is RViz2?" title="Direct link to What is RViz2?" translate="no">​</a></h3>
<p>RViz2 is ROS 2&#x27;s 3D visualization tool. It displays:</p>
<ul>
<li class="">Robot models (from URDF)</li>
<li class="">Sensor data (cameras, LiDAR, point clouds)</li>
<li class="">Coordinate frames (tf2)</li>
<li class="">Planning results (trajectories, paths)</li>
<li class="">Markers (for debugging: arrows, spheres, text)</li>
<li class="">Maps and occupancy grids</li>
</ul>
<p>RViz2 is essential for development, debugging, and demonstration.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="rviz2-architecture">RViz2 Architecture<a href="#rviz2-architecture" class="hash-link" aria-label="Direct link to RViz2 Architecture" title="Direct link to RViz2 Architecture" translate="no">​</a></h3>
<p>RViz2 subscribes to ROS 2 topics and visualizes data:</p>
<p><strong>Display Plugins:</strong> Each data type has a display plugin</p>
<ul>
<li class="">RobotModel: Visualizes URDF</li>
<li class="">Camera: Shows camera images</li>
<li class="">PointCloud2: Renders point clouds</li>
<li class="">TF: Shows coordinate frames</li>
<li class="">Marker: Displays custom visualization markers</li>
</ul>
<p><strong>Configuration:</strong> RViz2 configurations saved to files, allowing project-specific setups</p>
<p><strong>Interactive Markers:</strong> Allow interacting with visualization (move target poses, trigger actions)</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="visualizing-the-robot">Visualizing the Robot<a href="#visualizing-the-robot" class="hash-link" aria-label="Direct link to Visualizing the Robot" title="Direct link to Visualizing the Robot" translate="no">​</a></h3>
<p>To see humanoid robot in RViz2:</p>
<p><strong>Requirements:</strong></p>
<ol>
<li class="">URDF loaded to parameter server</li>
<li class=""><code>robot_state_publisher</code> running</li>
<li class="">Joint states being published</li>
<li class="">tf2 transforms available</li>
</ol>
<p><strong>RViz2 Configuration:</strong></p>
<ol>
<li class="">Add RobotModel display</li>
<li class="">Set robot description topic (typically <code>/robot_description</code>)</li>
<li class="">Robot appears, colored by link</li>
</ol>
<p><strong>Interactive Control:</strong> With <code>joint_state_publisher_gui</code>, slide joints to see robot move in real-time.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="visualizing-sensor-data">Visualizing Sensor Data<a href="#visualizing-sensor-data" class="hash-link" aria-label="Direct link to Visualizing Sensor Data" title="Direct link to Visualizing Sensor Data" translate="no">​</a></h3>
<p><strong>Camera Images:</strong></p>
<ul>
<li class="">Add Camera display</li>
<li class="">Select image topic (e.g., <code>/camera/image_raw</code>)</li>
<li class="">Image appears in 3D view or separate panel</li>
</ul>
<p><strong>Point Clouds:</strong></p>
<ul>
<li class="">Add PointCloud2 display</li>
<li class="">Select point cloud topic (e.g., <code>/scan</code> or <code>/camera/depth/points</code>)</li>
<li class="">Configure color by intensity, height, or RGB</li>
<li class="">Point cloud overlays robot model</li>
</ul>
<p><strong>LiDAR Scans:</strong></p>
<ul>
<li class="">Add LaserScan display</li>
<li class="">Select scan topic</li>
<li class="">Configure visualization (points, flat squares, etc.)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="visualizing-coordinate-frames">Visualizing Coordinate Frames<a href="#visualizing-coordinate-frames" class="hash-link" aria-label="Direct link to Visualizing Coordinate Frames" title="Direct link to Visualizing Coordinate Frames" translate="no">​</a></h3>
<p><strong>TF Display:</strong></p>
<ul>
<li class="">Add TF display</li>
<li class="">Toggle which frames to show (all frames can clutter view)</li>
<li class="">Each frame shown as RGB axes (X=red, Y=green, Z=blue)</li>
<li class="">Helps debug frame relationships and transform errors</li>
</ul>
<p><strong>Use Cases:</strong></p>
<ul>
<li class="">Verify sensor mounting positions</li>
<li class="">Debug transform tree structure</li>
<li class="">Understand coordinate frame relationships</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="debugging-with-markers">Debugging with Markers<a href="#debugging-with-markers" class="hash-link" aria-label="Direct link to Debugging with Markers" title="Direct link to Debugging with Markers" translate="no">​</a></h3>
<p>Markers visualize custom data:</p>
<p><strong>Marker Types:</strong></p>
<ul>
<li class="">Arrow: Direction vectors</li>
<li class="">Sphere: Points of interest</li>
<li class="">Line: Paths or connections</li>
<li class="">Cube: Bounding boxes</li>
<li class="">Text: Labels</li>
<li class="">Mesh: Custom 3D shapes</li>
</ul>
<p><strong>Publishing Markers:</strong>
Nodes publish to <code>/visualization_marker</code> topic. Markers specify:</p>
<ul>
<li class="">Type, position, orientation</li>
<li class="">Color, scale</li>
<li class="">Lifetime (auto-deletion)</li>
</ul>
<p><strong>Example Uses:</strong></p>
<ul>
<li class="">Show detected object bounding boxes</li>
<li class="">Display planned path</li>
<li class="">Indicate target grasp pose</li>
<li class="">Show force vectors</li>
<li class="">Label objects with text</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="rviz2-for-humanoid-development">RViz2 for Humanoid Development<a href="#rviz2-for-humanoid-development" class="hash-link" aria-label="Direct link to RViz2 for Humanoid Development" title="Direct link to RViz2 for Humanoid Development" translate="no">​</a></h3>
<p>Typical RViz2 setup for humanoid:</p>
<p><strong>Displays:</strong></p>
<ol>
<li class="">RobotModel: Show robot structure</li>
<li class="">TF: Key frames (base, hands, feet, cameras)</li>
<li class="">Camera: Front camera view</li>
<li class="">PointCloud2: Depth camera or LiDAR</li>
<li class="">Marker: Planning visualization</li>
<li class="">Path: Planned trajectories</li>
<li class="">Axes: Target poses</li>
</ol>
<p><strong>Workflow:</strong></p>
<ol>
<li class="">Start robot (hardware or simulation)</li>
<li class="">Launch RViz2 with configuration</li>
<li class="">See robot state in real-time</li>
<li class="">See sensor data overlaid on scene</li>
<li class="">See planning and control outputs</li>
<li class="">Debug by inspecting frames, data, and markers</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="rviz2-vs-simulation">RViz2 vs. Simulation<a href="#rviz2-vs-simulation" class="hash-link" aria-label="Direct link to RViz2 vs. Simulation" title="Direct link to RViz2 vs. Simulation" translate="no">​</a></h3>
<p>Important distinction:</p>
<p><strong>RViz2:</strong> Visualization only. Does not simulate physics. Shows what robot reports through topics and tf2.</p>
<p><strong>Gazebo/Isaac Sim:</strong> Full physics simulation. Simulates robot dynamics, sensors, environment.</p>
<p><strong>Combined Use:</strong></p>
<ul>
<li class="">Run Gazebo for physics simulation</li>
<li class="">Run RViz2 to visualize Gazebo&#x27;s output</li>
<li class="">RViz2 shows what Gazebo publishes (joint states, sensor data, tf)</li>
</ul>
<p>Both tools serve different purposes: RViz2 for visualization and debugging, simulators for testing in virtual environments.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="conceptual-diagrams">Conceptual Diagrams<a href="#conceptual-diagrams" class="hash-link" aria-label="Direct link to Conceptual Diagrams" title="Direct link to Conceptual Diagrams" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="diagram-1-urdf-structure">Diagram 1: URDF Structure<a href="#diagram-1-urdf-structure" class="hash-link" aria-label="Direct link to Diagram 1: URDF Structure" title="Direct link to Diagram 1: URDF Structure" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">URDF Anatomy:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Robot Description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Links (Rigid Bodies)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── Visual Geometry (what you see)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │     └── Mesh or primitives (box, cylinder, sphere)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── Collision Geometry (for collision checking)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │     └── Simplified shapes for performance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── Inertial Properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         ├── Mass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         ├── Center of mass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         └── Inertia tensor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Joints (Connections)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── Type (revolute, prismatic, fixed, etc.)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── Parent Link</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── Child Link</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── Axis of motion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── Limits (position, velocity, effort)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── Dynamics (damping, friction)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── Sensors/Actuators</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      └── Specifications and mounting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Example Hierarchy:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[torso]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ├─[joint: right_shoulder]─→ [link: right_upper_arm]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   │                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   │                               └─[joint: right_elbow]─→ [link: right_forearm]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   └─[joint: left_shoulder]──→ [link: left_upper_arm]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   └─[joint: left_elbow]──→ [link: left_forearm]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="diagram-2-kinematic-chain">Diagram 2: Kinematic Chain<a href="#diagram-2-kinematic-chain" class="hash-link" aria-label="Direct link to Diagram 2: Kinematic Chain" title="Direct link to Diagram 2: Kinematic Chain" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Humanoid Kinematic Tree:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    [base_link/torso]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        +------------------+------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        |                  |                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [left_leg]         [right_leg]         [arms &amp; head]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        |                  |                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [hip_yaw]          [hip_yaw]          [shoulders...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        |                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [hip_roll]         [hip_roll]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        |                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [hip_pitch]        [hip_pitch]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        |                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [knee]             [knee]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        |                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [ankle_pitch]      [ankle_pitch]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        |                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [ankle_roll]       [ankle_roll]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        |                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [foot]             [foot]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Forward Kinematics Example (right arm):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Joint Angles: θ = [θ_shoulder_pitch, θ_shoulder_roll, θ_shoulder_yaw, θ_elbow]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Transformations: T_base→hand = T₀ × T₁(θ_sp) × T₂(θ_sr) × T₃(θ_sy) × T₄(θ_e)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Hand Pose: [x, y, z, roll, pitch, yaw] in base frame</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Inverse Kinematics Example:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Desired Hand Pose: [x, y, z, roll, pitch, yaw]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Solver (analytical or numerical optimization)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Joint Angles: θ = [θ_shoulder_pitch, θ_shoulder_roll, θ_shoulder_yaw, θ_elbow]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="diagram-3-tf2-transform-tree">Diagram 3: tf2 Transform Tree<a href="#diagram-3-tf2-transform-tree" class="hash-link" aria-label="Direct link to Diagram 3: tf2 Transform Tree" title="Direct link to Diagram 3: tf2 Transform Tree" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Transform Tree for Humanoid:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[map] (global reference)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓ (localization correction)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[odom] (odometry frame)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓ (odometry estimate)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[base_link] (robot base)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[torso]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├─ [head]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │    ├─ [camera_left]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │    ├─ [camera_right]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │    └─ [lidar]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├─ [left_shoulder]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │    ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │  [left_upper_arm]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │    ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │  [left_forearm]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │    ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │  [left_hand]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │    └─ [left_gripper]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├─ [right_shoulder]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │    ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │  [right_upper_arm]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │    ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │  [right_forearm]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │    ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │  [right_hand]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │    └─ [right_gripper]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├─ [left_hip]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │    ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │  [left_upper_leg]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │    ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │  [left_lower_leg]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │    ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │  [left_foot]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └─ [right_hip]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     [right_upper_leg]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     [right_lower_leg]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     [right_foot]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Transform Lookup Example:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Query: &quot;camera_left to right_hand&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Path: camera_left → head → torso → right_shoulder → ... → right_hand</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Result: Translation [x,y,z] and Rotation [qx,qy,qz,qw] at timestamp t</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="diagram-4-ros2_control-architecture">Diagram 4: ros2_control Architecture<a href="#diagram-4-ros2_control-architecture" class="hash-link" aria-label="Direct link to Diagram 4: ros2_control Architecture" title="Direct link to Diagram 4: ros2_control Architecture" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ros2_control Framework:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                  ROS 2 Ecosystem                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  [Motion Planners] [Nav Stack] [Teleoperation]     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└────────────────┬────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 │ (topics, actions, services)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             Controller Manager                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌──────────────────────────────────────────────┐  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  Controllers:                                │  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  ┌─────────────────┐  ┌──────────────────┐  │  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  │Joint Trajectory │  │ Position Control │  │  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  │   Controller    │  │                  │  │  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  └────────┬────────┘  └────────┬─────────┘  │  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │           │                    │            │  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  ┌────────▼────────┐  ┌────────▼─────────┐  │  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  │Joint State      │  │ Effort Control   │  │  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  │  Broadcaster    │  │                  │  │  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  └─────────────────┘  └──────────────────┘  │  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └───────────────────────────── ─────────────────┘  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 ↓ (command/state interfaces)       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌──────────────────────────────────────────────┐  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │           Hardware Interface                 │  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - Read joint states (position, vel, effort) │  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - Write joint commands                      │  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - Abstract hardware specifics               │  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └────────────────┬─────────────────────────────┘  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└───────────────────┼─────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    │ (hardware-specific protocol)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────── ──────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│              Physical Hardware                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  [Motor Drivers] [Encoders] [Force Sensors]        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Data Flow:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. Planner sends trajectory → Controller Manager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. Controller Manager activates Joint Trajectory Controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. Controller computes control commands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. Hardware Interface writes commands to motors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5. Hardware Interface reads joint states from encoders</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6. Joint State Broadcaster publishes to /joint_states</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7. robot_state_publisher uses /joint_states to update tf2</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="diagram-5-ai-to-control-architecture">Diagram 5: AI-to-Control Architecture<a href="#diagram-5-ai-to-control-architecture" class="hash-link" aria-label="Direct link to Diagram 5: AI-to-Control Architecture" title="Direct link to Diagram 5: AI-to-Control Architecture" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Hierarchical AI-to-Control Architecture:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Level 1: AI Agent (High-Level Reasoning)            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - Large Language Model                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - Vision Transformers                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - Task Planning                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Frequency: 1-10 Hz | Hardware: GPU                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└────────────────┬────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 │ (goals: &quot;grasp cup&quot;, &quot;walk to kitchen&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Level 2: Motion Planning (Mid-Level)                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - Path Planning (RRT, A*)                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - Inverse Kinematics                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - Collision Avoidance                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Frequency: 10-50 Hz | Hardware: CPU                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└────────────────┬────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 │ (trajectories: joint waypoints + timing)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Level 3: Controllers (Low-Level)                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - PID Controllers                                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - Balance Controller                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - Trajectory Execution                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Frequency: 100-1000 Hz | Hardware: RT CPU/MCU      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└────────────────┬────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 │ (motor commands: torques, voltages)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Level 4: Hardware                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - Motor Drivers                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - Actuators                                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - Sensors                                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Frequency: 1-10 kHz | Hardware: Motor Electronics  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Feedback Loop:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Sensors] → [State Estimation] → [Perception] → [AI Agent]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ↑                                                 ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Hardware] ← [Controllers] ← [Motion Planning] ← [Goals]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Example Data Flow (LLM-Controlled Humanoid):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User: &quot;Pick up the red cup&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[LLM]: Understand intent, detect object, plan task</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ↓ (action goal: GraspObject)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Task Planner]: Decompose into motion primitives</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ↓ (action: MoveToPreGrasp)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Motion Planner]: Compute collision-free trajectory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ↓ (FollowJointTrajectory action)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Controller]: Execute trajectory with feedback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ↓ (joint torque commands)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Hardware]: Move arm to grasp pose</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="key-concepts-summary">Key Concepts Summary<a href="#key-concepts-summary" class="hash-link" aria-label="Direct link to Key Concepts Summary" title="Direct link to Key Concepts Summary" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="urdf-unified-robot-description-format-1">URDF (Unified Robot Description Format)<a href="#urdf-unified-robot-description-format-1" class="hash-link" aria-label="Direct link to URDF (Unified Robot Description Format)" title="Direct link to URDF (Unified Robot Description Format)" translate="no">​</a></h3>
<p>XML format describing robot structure: links (rigid bodies with geometry and inertia) and joints (connections with type, axis, limits).</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="kinematic-chain">Kinematic Chain<a href="#kinematic-chain" class="hash-link" aria-label="Direct link to Kinematic Chain" title="Direct link to Kinematic Chain" translate="no">​</a></h3>
<p>Series of rigid links connected by joints. Humanoids are kinematic trees with torso as root.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="forward-kinematics-1">Forward Kinematics<a href="#forward-kinematics-1" class="hash-link" aria-label="Direct link to Forward Kinematics" title="Direct link to Forward Kinematics" translate="no">​</a></h3>
<p>Computing end effector pose from joint angles. Straightforward matrix multiplication through chain.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="inverse-kinematics-1">Inverse Kinematics<a href="#inverse-kinematics-1" class="hash-link" aria-label="Direct link to Inverse Kinematics" title="Direct link to Inverse Kinematics" translate="no">​</a></h3>
<p>Computing joint angles needed to achieve target end effector pose. More challenging, may have multiple or no solutions.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="tf2">tf2<a href="#tf2" class="hash-link" aria-label="Direct link to tf2" title="Direct link to tf2" translate="no">​</a></h3>
<p>ROS 2 transform library managing coordinate frames and transformations. Maintains transform tree, provides lookup and broadcasting.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="robot_state_publisher-1">robot_state_publisher<a href="#robot_state_publisher-1" class="hash-link" aria-label="Direct link to robot_state_publisher" title="Direct link to robot_state_publisher" translate="no">​</a></h3>
<p>Node that computes and publishes transforms for all robot links based on URDF and joint states.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="ros2_control">ros2_control<a href="#ros2_control" class="hash-link" aria-label="Direct link to ros2_control" title="Direct link to ros2_control" translate="no">​</a></h3>
<p>Framework for robot control providing hardware abstraction, controller management, and real-time support.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="hardware-interface">Hardware Interface<a href="#hardware-interface" class="hash-link" aria-label="Direct link to Hardware Interface" title="Direct link to Hardware Interface" translate="no">​</a></h3>
<p>Layer in ros2_control that communicates with physical hardware, reading states and writing commands.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="controller">Controller<a href="#controller" class="hash-link" aria-label="Direct link to Controller" title="Direct link to Controller" translate="no">​</a></h3>
<p>Component implementing control algorithm. Reads states, computes commands, writes to hardware interface.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="rviz2">RViz2<a href="#rviz2" class="hash-link" aria-label="Direct link to RViz2" title="Direct link to RViz2" translate="no">​</a></h3>
<p>3D visualization tool for ROS 2. Displays robot models, sensor data, coordinate frames, and debug information.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="knowledge-checkpoint">Knowledge Checkpoint<a href="#knowledge-checkpoint" class="hash-link" aria-label="Direct link to Knowledge Checkpoint" title="Direct link to Knowledge Checkpoint" translate="no">​</a></h2>
<p>Test your understanding of this chapter&#x27;s concepts:</p>
<ol>
<li class="">
<p><strong>URDF Understanding:</strong></p>
<ul>
<li class="">Explain the difference between visual geometry and collision geometry in URDF. Why are they separated?</li>
<li class="">A humanoid arm has shoulder (3 DOF), elbow (1 DOF), and wrist (3 DOF). How many joints would you define in URDF?</li>
<li class="">Why are accurate inertial properties critical for physics simulation?</li>
</ul>
</li>
<li class="">
<p><strong>Kinematics:</strong></p>
<ul>
<li class="">What is the difference between forward kinematics and inverse kinematics?</li>
<li class="">A humanoid with 7-DOF arms (redundant) reaches for an object. Why might multiple joint configurations achieve the same hand pose?</li>
<li class="">Explain why the Jacobian matrix is important for robot control.</li>
</ul>
</li>
<li class="">
<p><strong>Transform Management:</strong></p>
<ul>
<li class="">Draw the transform tree for a humanoid robot including map, odom, base, and sensor frames.</li>
<li class="">Why is tf2 necessary? Why not just compute transforms directly in each node?</li>
<li class="">Explain the difference between static and dynamic transforms. Give examples of each.</li>
</ul>
</li>
<li class="">
<p><strong>robot_state_publisher:</strong></p>
<ul>
<li class="">What are the inputs and outputs of robot_state_publisher?</li>
<li class="">Why is robot_state_publisher essential for visualization and motion planning?</li>
<li class="">When would you use joint_state_publisher versus getting joint states from hardware?</li>
</ul>
</li>
<li class="">
<p><strong>ros2_control:</strong></p>
<ul>
<li class="">Explain the three layers of ros2_control architecture: hardware interface, controller manager, controllers.</li>
<li class="">Why is exclusive controller access important (preventing multiple controllers from writing to same joint)?</li>
<li class="">What is the difference between position control, velocity control, and effort (torque) control?</li>
</ul>
</li>
<li class="">
<p><strong>AI Integration:</strong></p>
<ul>
<li class="">Design a four-level hierarchy for an LLM-controlled humanoid: AI agent, motion planning, control, hardware. Specify frequency and data flow for each level.</li>
<li class="">Why can&#x27;t an AI agent directly command motor torques at 1 Hz for a balancing humanoid?</li>
<li class="">Propose an architecture for integrating a learned RL policy (trained at 50 Hz) with ros2_control.</li>
</ul>
</li>
<li class="">
<p><strong>Visualization:</strong></p>
<ul>
<li class="">What is the difference between RViz2 and Gazebo?</li>
<li class="">List five types of data you would visualize in RViz2 when debugging a humanoid navigation system.</li>
<li class="">How do visualization markers help debug motion planning?</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="chapter-summary">Chapter Summary<a href="#chapter-summary" class="hash-link" aria-label="Direct link to Chapter Summary" title="Direct link to Chapter Summary" translate="no">​</a></h2>
<p>This chapter explored ROS 2 tools and patterns specific to humanoid robotics:</p>
<p><strong>URDF:</strong> The Unified Robot Description Format represents robot structure through links (rigid bodies with geometry and inertia) and joints (connections with type, axis, limits). Xacro adds programmability to reduce repetition. Accurate URDF is essential for simulation, planning, and visualization.</p>
<p><strong>Kinematic Chains:</strong> Humanoids are kinematic trees with serial chains for limbs. Forward kinematics computes end effector poses from joint angles; inverse kinematics (more challenging) computes joint angles for target poses. The Jacobian relates joint velocities to end effector velocities.</p>
<p><strong>tf2 Transform System:</strong> Manages coordinate frames and transformations in tree structure. Static transforms (sensor mounts) publish once; dynamic transforms (joint angles, robot pose) publish continuously. Transform lookup finds paths through tree and computes combined transformations.</p>
<p><strong>robot_state_publisher:</strong> Central node that computes and publishes transforms for all robot links based on URDF and current joint states. Essential for visualization, planning, and control.</p>
<p><strong>ros2_control:</strong> Framework for robot control with hardware abstraction, controller management, and real-time support. Three layers: hardware interface (talks to motors/sensors), controller manager (orchestrates controllers), controllers (implement control algorithms).</p>
<p><strong>AI-to-Control Integration:</strong> Hierarchical architecture bridges high-level AI (goals at 1-10 Hz) to low-level control (motor commands at 100-1000 Hz). Motion planning layer translates goals into trajectories; controllers execute trajectories with feedback.</p>
<p><strong>RViz2 Visualization:</strong> 3D tool for visualizing robot models, sensor data, coordinate frames, and planning outputs. Essential for development and debugging. Complements physics simulators (which simulate dynamics, not just visualize).</p>
<p>These humanoid-specific tools build on ROS 2 foundations to enable sophisticated robot systems.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="further-reading">Further Reading<a href="#further-reading" class="hash-link" aria-label="Direct link to Further Reading" title="Direct link to Further Reading" translate="no">​</a></h2>
<p><strong>Official Documentation:</strong></p>
<ul>
<li class="">URDF Tutorials (wiki.ros.org/urdf)</li>
<li class="">tf2 Documentation (docs.ros.org)</li>
<li class="">ros2_control Documentation</li>
<li class="">RViz2 User Guide</li>
</ul>
<p><strong>Books:</strong></p>
<ul>
<li class="">&quot;Modern Robotics&quot; by Lynch and Park (kinematics and dynamics)</li>
<li class="">&quot;Robotics: Modelling, Planning and Control&quot; by Siciliano et al.</li>
<li class="">&quot;Springer Handbook of Robotics&quot; (comprehensive reference)</li>
</ul>
<p><strong>Papers:</strong></p>
<ul>
<li class="">&quot;URDF: The Unified Robot Description Format&quot; (Willow Garage)</li>
<li class="">&quot;ros_control: A Generic and Simple Control Framework for ROS&quot;</li>
<li class="">&quot;tf: The Transform Library&quot; (Foote)</li>
</ul>
<p><strong>Online Resources:</strong></p>
<ul>
<li class="">MoveIt 2 Tutorials (motion planning with ros2_control)</li>
<li class="">Gazebo tutorials with ros2_control</li>
<li class="">ROS 2 Control Demos (ros-controls/ros2_control_demos)</li>
</ul>
<p><strong>Tools:</strong></p>
<ul>
<li class="">check_urdf: Validate URDF syntax</li>
<li class="">urdf_to_graphiz: Visualize kinematic tree</li>
<li class="">robot_state_publisher documentation</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="looking-ahead">Looking Ahead<a href="#looking-ahead" class="hash-link" aria-label="Direct link to Looking Ahead" title="Direct link to Looking Ahead" translate="no">​</a></h2>
<p>With understanding of humanoid-specific ROS 2 tools, we now turn to physics simulation. The next chapter explores Gazebo and Isaac Sim—physics engines that simulate robot dynamics, sensors, and environments. Simulation enables developing and testing humanoid behaviors safely before deployment to hardware, and provides environments for training learned policies. The URDF, tf2, and ros2_control concepts from this chapter integrate directly into these simulation platforms.</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Physical-AI-Humanoid-Robotics/chapters/chapter-04-building-with-ros2"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Chapter 4: Building with ROS 2</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Physical-AI-Humanoid-Robotics/chapters/chapter-06-physics-simulation-with-gazebo"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Chapter 6: Physics Simulation with Gazebo</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#learning-objectives" class="table-of-contents__link toc-highlight">Learning Objectives</a></li><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#urdf-unified-robot-description-format" class="table-of-contents__link toc-highlight">URDF: Unified Robot Description Format</a><ul><li><a href="#what-is-urdf" class="table-of-contents__link toc-highlight">What is URDF?</a></li><li><a href="#urdf-structure" class="table-of-contents__link toc-highlight">URDF Structure</a></li><li><a href="#joint-types" class="table-of-contents__link toc-highlight">Joint Types</a></li><li><a href="#visual-vs-collision-geometry" class="table-of-contents__link toc-highlight">Visual vs. Collision Geometry</a></li><li><a href="#inertial-properties" class="table-of-contents__link toc-highlight">Inertial Properties</a></li><li><a href="#xacro-programmable-urdf" class="table-of-contents__link toc-highlight">Xacro: Programmable URDF</a></li><li><a href="#urdf-best-practices" class="table-of-contents__link toc-highlight">URDF Best Practices</a></li></ul></li><li><a href="#kinematic-chains-and-joint-hierarchies" class="table-of-contents__link toc-highlight">Kinematic Chains and Joint Hierarchies</a><ul><li><a href="#understanding-kinematic-chains" class="table-of-contents__link toc-highlight">Understanding Kinematic Chains</a></li><li><a href="#joint-hierarchy-representation" class="table-of-contents__link toc-highlight">Joint Hierarchy Representation</a></li><li><a href="#forward-kinematics" class="table-of-contents__link toc-highlight">Forward Kinematics</a></li><li><a href="#inverse-kinematics" class="table-of-contents__link toc-highlight">Inverse Kinematics</a></li><li><a href="#jacobian-and-differential-kinematics" class="table-of-contents__link toc-highlight">Jacobian and Differential Kinematics</a></li></ul></li><li><a href="#tf2-transform-system" class="table-of-contents__link toc-highlight">tf2: Transform System</a><ul><li><a href="#why-transform-management-matters" class="table-of-contents__link toc-highlight">Why Transform Management Matters</a></li><li><a href="#tf2-architecture" class="table-of-contents__link toc-highlight">tf2 Architecture</a></li><li><a href="#static-vs-dynamic-transforms" class="table-of-contents__link toc-highlight">Static vs. Dynamic Transforms</a></li><li><a href="#common-frame-conventions" class="table-of-contents__link toc-highlight">Common Frame Conventions</a></li><li><a href="#transform-broadcasting" class="table-of-contents__link toc-highlight">Transform Broadcasting</a></li><li><a href="#transform-listening" class="table-of-contents__link toc-highlight">Transform Listening</a></li><li><a href="#transform-tree-example" class="table-of-contents__link toc-highlight">Transform Tree Example</a></li><li><a href="#time-synchronization" class="table-of-contents__link toc-highlight">Time Synchronization</a></li></ul></li><li><a href="#robot_state_publisher-and-joint_state_publisher" class="table-of-contents__link toc-highlight">robot_state_publisher and joint_state_publisher</a><ul><li><a href="#robot_state_publisher" class="table-of-contents__link toc-highlight">robot_state_publisher</a></li><li><a href="#joint_state_publisher" class="table-of-contents__link toc-highlight">joint_state_publisher</a></li><li><a href="#joint-state-message" class="table-of-contents__link toc-highlight">Joint State Message</a></li><li><a href="#workflow-urdf-to-visualization" class="table-of-contents__link toc-highlight">Workflow: URDF to Visualization</a></li></ul></li><li><a href="#controller-interfaces-and-ros2_control" class="table-of-contents__link toc-highlight">Controller Interfaces and ros2_control</a><ul><li><a href="#what-is-ros2_control" class="table-of-contents__link toc-highlight">What is ros2_control?</a></li><li><a href="#ros2_control-architecture" class="table-of-contents__link toc-highlight">ros2_control Architecture</a></li><li><a href="#hardware-interface-concepts" class="table-of-contents__link toc-highlight">Hardware Interface Concepts</a></li><li><a href="#common-controllers" class="table-of-contents__link toc-highlight">Common Controllers</a></li><li><a href="#controller-manager" class="table-of-contents__link toc-highlight">Controller Manager</a></li><li><a href="#real-time-considerations" class="table-of-contents__link toc-highlight">Real-Time Considerations</a></li></ul></li><li><a href="#bridging-ai-agents-to-ros-controllers" class="table-of-contents__link toc-highlight">Bridging AI Agents to ROS Controllers</a><ul><li><a href="#the-ai-to-robot-control-gap" class="table-of-contents__link toc-highlight">The AI-to-Robot Control Gap</a></li><li><a href="#hierarchical-control-architecture" class="table-of-contents__link toc-highlight">Hierarchical Control Architecture</a></li><li><a href="#interface-patterns" class="table-of-contents__link toc-highlight">Interface Patterns</a></li><li><a href="#example-llm-controlled-humanoid" class="table-of-contents__link toc-highlight">Example: LLM-Controlled Humanoid</a></li><li><a href="#learned-policy-integration" class="table-of-contents__link toc-highlight">Learned Policy Integration</a></li></ul></li><li><a href="#rviz2-visualization-and-debugging" class="table-of-contents__link toc-highlight">RViz2: Visualization and Debugging</a><ul><li><a href="#what-is-rviz2" class="table-of-contents__link toc-highlight">What is RViz2?</a></li><li><a href="#rviz2-architecture" class="table-of-contents__link toc-highlight">RViz2 Architecture</a></li><li><a href="#visualizing-the-robot" class="table-of-contents__link toc-highlight">Visualizing the Robot</a></li><li><a href="#visualizing-sensor-data" class="table-of-contents__link toc-highlight">Visualizing Sensor Data</a></li><li><a href="#visualizing-coordinate-frames" class="table-of-contents__link toc-highlight">Visualizing Coordinate Frames</a></li><li><a href="#debugging-with-markers" class="table-of-contents__link toc-highlight">Debugging with Markers</a></li><li><a href="#rviz2-for-humanoid-development" class="table-of-contents__link toc-highlight">RViz2 for Humanoid Development</a></li><li><a href="#rviz2-vs-simulation" class="table-of-contents__link toc-highlight">RViz2 vs. Simulation</a></li></ul></li><li><a href="#conceptual-diagrams" class="table-of-contents__link toc-highlight">Conceptual Diagrams</a><ul><li><a href="#diagram-1-urdf-structure" class="table-of-contents__link toc-highlight">Diagram 1: URDF Structure</a></li><li><a href="#diagram-2-kinematic-chain" class="table-of-contents__link toc-highlight">Diagram 2: Kinematic Chain</a></li><li><a href="#diagram-3-tf2-transform-tree" class="table-of-contents__link toc-highlight">Diagram 3: tf2 Transform Tree</a></li><li><a href="#diagram-4-ros2_control-architecture" class="table-of-contents__link toc-highlight">Diagram 4: ros2_control Architecture</a></li><li><a href="#diagram-5-ai-to-control-architecture" class="table-of-contents__link toc-highlight">Diagram 5: AI-to-Control Architecture</a></li></ul></li><li><a href="#key-concepts-summary" class="table-of-contents__link toc-highlight">Key Concepts Summary</a><ul><li><a href="#urdf-unified-robot-description-format-1" class="table-of-contents__link toc-highlight">URDF (Unified Robot Description Format)</a></li><li><a href="#kinematic-chain" class="table-of-contents__link toc-highlight">Kinematic Chain</a></li><li><a href="#forward-kinematics-1" class="table-of-contents__link toc-highlight">Forward Kinematics</a></li><li><a href="#inverse-kinematics-1" class="table-of-contents__link toc-highlight">Inverse Kinematics</a></li><li><a href="#tf2" class="table-of-contents__link toc-highlight">tf2</a></li><li><a href="#robot_state_publisher-1" class="table-of-contents__link toc-highlight">robot_state_publisher</a></li><li><a href="#ros2_control" class="table-of-contents__link toc-highlight">ros2_control</a></li><li><a href="#hardware-interface" class="table-of-contents__link toc-highlight">Hardware Interface</a></li><li><a href="#controller" class="table-of-contents__link toc-highlight">Controller</a></li><li><a href="#rviz2" class="table-of-contents__link toc-highlight">RViz2</a></li></ul></li><li><a href="#knowledge-checkpoint" class="table-of-contents__link toc-highlight">Knowledge Checkpoint</a></li><li><a href="#chapter-summary" class="table-of-contents__link toc-highlight">Chapter Summary</a></li><li><a href="#further-reading" class="table-of-contents__link toc-highlight">Further Reading</a></li><li><a href="#looking-ahead" class="table-of-contents__link toc-highlight">Looking Ahead</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Course</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Physical-AI-Humanoid-Robotics/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/Physical-AI-Humanoid-Robotics/chapters/chapter-01-introduction-to-physical-ai">Foundations</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://panaversity.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Panaversity<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://docs.ros.org/en/humble/" target="_blank" rel="noopener noreferrer" class="footer__link-item">ROS 2 Documentation<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://developer.nvidia.com/isaac-ros" target="_blank" rel="noopener noreferrer" class="footer__link-item">NVIDIA Isaac<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/muskaanfayyaz/Physical-AI-Humanoid-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Panaversity. Built with Docusaurus.</div></div></div></footer><button class="rag-chatbot-toggle" aria-label="Toggle chatbot">💬</button></div>
</body>
</html>